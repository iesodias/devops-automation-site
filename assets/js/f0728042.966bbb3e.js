"use strict";(self.webpackChunkdevops_automation_site=self.webpackChunkdevops_automation_site||[]).push([[2024],{147:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>t});const o=JSON.parse('{"id":"fmt-validate-show","title":"Aula 6 - Mantendo a Qualidade do C\xf3digo com fmt, validate e show","description":"---","source":"@site/curso-terraform-udemy/07-fmt-validate-show.md","sourceDirName":".","slug":"/fmt-validate-show","permalink":"/udemy/terraform-automacao/fmt-validate-show","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"id":"fmt-validate-show","title":"Aula 6 - Mantendo a Qualidade do C\xf3digo com fmt, validate e show","noindex":true},"sidebar":"tutorialSidebar","previous":{"title":"Aula 5 - Criando Recursos em Lote com count e for\\\\_each","permalink":"/udemy/terraform-automacao/foreach-count"},"next":{"title":"Aula 7 - O Perigo do terraform.tfstate e a Solu\xe7\xe3o do Backend Remoto","permalink":"/udemy/terraform-automacao/backend-remote"}}');var n=r(4848),d=r(8453);const i={id:"fmt-validate-show",title:"Aula 6 - Mantendo a Qualidade do C\xf3digo com fmt, validate e show",noindex:!0},s="Aula 6: Mantendo a Qualidade do C\xf3digo com fmt, validate e show",l={},t=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"O que s\xe3o <code>fmt</code>, <code>validate</code> e <code>show</code>?",id:"o-que-s\xe3o-fmt-validate-e-show",level:2},{value:"Explica\xe7\xe3o T\xe9cnica",id:"explica\xe7\xe3o-t\xe9cnica",level:2},{value:"<code>terraform fmt</code>",id:"terraform-fmt",level:3},{value:"<code>terraform validate</code>",id:"terraform-validate",level:3},{value:"<code>terraform show</code>",id:"terraform-show",level:3},{value:"Comandos de Refer\xeancia",id:"comandos-de-refer\xeancia",level:2},{value:"Exemplo Pr\xe1tico",id:"exemplo-pr\xe1tico",level:2},{value:"C\xf3digo mal formatado (<code>main.tf</code> antes do fmt):",id:"c\xf3digo-mal-formatado-maintf-antes-do-fmt",level:3},{value:"Rodando o <code>terraform fmt</code>",id:"rodando-o-terraform-fmt",level:3},{value:"C\xf3digo corrigido ap\xf3s o fmt:",id:"c\xf3digo-corrigido-ap\xf3s-o-fmt",level:3},{value:"C\xf3digo com erro proposital para o validate:",id:"c\xf3digo-com-erro-proposital-para-o-validate",level:3},{value:"Rodando o <code>terraform validate</code>",id:"rodando-o-terraform-validate",level:3},{value:"Output esperado:",id:"output-esperado",level:4},{value:"Corrigindo o erro:",id:"corrigindo-o-erro",level:3},{value:"Rodando <code>terraform validate</code> novamente:",id:"rodando-terraform-validate-novamente",level:3},{value:"Usando <code>terraform show</code>",id:"usando-terraform-show",level:2},{value:"Output esperado (parcial):",id:"output-esperado-parcial",level:4},{value:"Melhores Pr\xe1ticas",id:"melhores-pr\xe1ticas",level:2},{value:"Fluxo de Trabalho Profissional",id:"fluxo-de-trabalho-profissional",level:2}];function c(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.header,{children:(0,n.jsx)(a.h1,{id:"aula-6-mantendo-a-qualidade-do-c\xf3digo-com-fmt-validate-e-show",children:"Aula 6: Mantendo a Qualidade do C\xf3digo com fmt, validate e show"})}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,n.jsxs)(a.p,{children:["Al\xe9m do famoso ciclo ",(0,n.jsx)(a.code,{children:"init > plan > apply"}),", o Terraform oferece comandos auxiliares que garantem a ",(0,n.jsx)(a.strong,{children:"qualidade, consist\xeancia e seguran\xe7a"})," do seu c\xf3digo: ",(0,n.jsx)(a.code,{children:"terraform fmt"}),", ",(0,n.jsx)(a.code,{children:"terraform validate"})," e ",(0,n.jsx)(a.code,{children:"terraform show"}),"."]}),"\n",(0,n.jsx)(a.p,{children:"Esses comandos ajudam a:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Garantir que o c\xf3digo esteja formatado corretamente"}),"\n",(0,n.jsx)(a.li,{children:"Validar erros de sintaxe e argumentos"}),"\n",(0,n.jsx)(a.li,{children:"Inspecionar recursos j\xe1 criados e entender o estado atual da infraestrutura"}),"\n"]}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsxs)(a.h2,{id:"o-que-s\xe3o-fmt-validate-e-show",children:["O que s\xe3o ",(0,n.jsx)(a.code,{children:"fmt"}),", ",(0,n.jsx)(a.code,{children:"validate"})," e ",(0,n.jsx)(a.code,{children:"show"}),"?"]}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"terraform fmt"}),": formata automaticamente os arquivos ",(0,n.jsx)(a.code,{children:".tf"})]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"terraform validate"}),": verifica se a sintaxe e argumentos do c\xf3digo est\xe3o corretos"]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"terraform show"}),": exibe informa\xe7\xf5es do estado atual da infraestrutura de forma leg\xedvel"]}),"\n"]}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"explica\xe7\xe3o-t\xe9cnica",children:"Explica\xe7\xe3o T\xe9cnica"}),"\n",(0,n.jsx)(a.h3,{id:"terraform-fmt",children:(0,n.jsx)(a.code,{children:"terraform fmt"})}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Reescreve os arquivos Terraform com indenta\xe7\xe3o e alinhamento padronizados"}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.strong,{children:"N\xe3o altera a l\xf3gica"})," do c\xf3digo"]}),"\n",(0,n.jsx)(a.li,{children:"Facilita a leitura e o trabalho em equipe"}),"\n"]}),"\n",(0,n.jsx)(a.h3,{id:"terraform-validate",children:(0,n.jsx)(a.code,{children:"terraform validate"})}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Valida o c\xf3digo localmente (sem acessar a nuvem)"}),"\n",(0,n.jsx)(a.li,{children:"Verifica erros de sintaxe, argumentos inv\xe1lidos e tipos incorretos"}),"\n"]}),"\n",(0,n.jsx)(a.h3,{id:"terraform-show",children:(0,n.jsx)(a.code,{children:"terraform show"})}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsxs)(a.li,{children:["Mostra os recursos gerenciados e seus atributos atuais com base no ",(0,n.jsx)(a.code,{children:"terraform.tfstate"})]}),"\n",(0,n.jsxs)(a.li,{children:["Pode inspecionar arquivos de plano salvos (",(0,n.jsx)(a.code,{children:".plan"}),")"]}),"\n"]}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"comandos-de-refer\xeancia",children:"Comandos de Refer\xeancia"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"terraform fmt\nterraform validate\nterraform show\nterraform show tfplan\n"})}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"exemplo-pr\xe1tico",children:"Exemplo Pr\xe1tico"}),"\n",(0,n.jsxs)(a.h3,{id:"c\xf3digo-mal-formatado-maintf-antes-do-fmt",children:["C\xf3digo mal formatado (",(0,n.jsx)(a.code,{children:"main.tf"})," antes do fmt):"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-hcl",children:'resource   "aws_s3_bucket" "exemplo"   {\n   bucket="bucket-123"\nacl="private"\n}\n'})}),"\n",(0,n.jsxs)(a.h3,{id:"rodando-o-terraform-fmt",children:["Rodando o ",(0,n.jsx)(a.code,{children:"terraform fmt"})]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"terraform fmt\n"})}),"\n",(0,n.jsx)(a.h3,{id:"c\xf3digo-corrigido-ap\xf3s-o-fmt",children:"C\xf3digo corrigido ap\xf3s o fmt:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-hcl",children:'resource "aws_s3_bucket" "exemplo" {\n  bucket = "bucket-123"\n  acl    = "private"\n}\n'})}),"\n",(0,n.jsx)(a.h3,{id:"c\xf3digo-com-erro-proposital-para-o-validate",children:"C\xf3digo com erro proposital para o validate:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-hcl",children:'resource "aws_instance" "web" {\n  tipo_de_instancia = "t2.micro"\n}\n'})}),"\n",(0,n.jsxs)(a.h3,{id:"rodando-o-terraform-validate",children:["Rodando o ",(0,n.jsx)(a.code,{children:"terraform validate"})]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"terraform validate\n"})}),"\n",(0,n.jsx)(a.h4,{id:"output-esperado",children:"Output esperado:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-text",children:'\u2502 Error: Unsupported argument\n\u2502   on main.tf line 2, in resource "aws_instance" "web":\n\u2502   2:   tipo_de_instancia = "t2.micro"\n\u2502\n\u2502 An argument named "tipo_de_instancia" is not expected here.\n'})}),"\n",(0,n.jsx)(a.h3,{id:"corrigindo-o-erro",children:"Corrigindo o erro:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-hcl",children:'resource "aws_instance" "web" {\n  instance_type = "t2.micro"\n}\n'})}),"\n",(0,n.jsxs)(a.h3,{id:"rodando-terraform-validate-novamente",children:["Rodando ",(0,n.jsx)(a.code,{children:"terraform validate"})," novamente:"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"terraform validate\n"})}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-text",children:"Success! The configuration is valid.\n"})}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsxs)(a.h2,{id:"usando-terraform-show",children:["Usando ",(0,n.jsx)(a.code,{children:"terraform show"})]}),"\n",(0,n.jsxs)(a.p,{children:["Com infraestrutura j\xe1 criada e ",(0,n.jsx)(a.code,{children:"terraform.tfstate"})," existente:"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"terraform show\n"})}),"\n",(0,n.jsx)(a.h4,{id:"output-esperado-parcial",children:"Output esperado (parcial):"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-text",children:'# aws_s3_bucket.exemplo:\nresource "aws_s3_bucket" "exemplo" {\n  acl    = "private"\n  bucket = "bucket-123"\n  id     = "bucket-123"\n}\n'})}),"\n",(0,n.jsx)(a.p,{children:"Para analisar um plano salvo:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"terraform plan -out=tfplan\nterraform show tfplan\n"})}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"melhores-pr\xe1ticas",children:"Melhores Pr\xe1ticas"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsxs)(a.li,{children:[(0,n.jsxs)(a.strong,{children:["Use ",(0,n.jsx)(a.code,{children:"terraform fmt"})," antes de qualquer commit"]})," para manter a consist\xeancia"]}),"\n",(0,n.jsx)(a.li,{children:(0,n.jsxs)(a.strong,{children:["Valide sempre com ",(0,n.jsx)(a.code,{children:"terraform validate"})," antes do plan"]})}),"\n",(0,n.jsx)(a.li,{children:(0,n.jsxs)(a.strong,{children:["Inspecione com ",(0,n.jsx)(a.code,{children:"terraform show"})," quando precisar entender o que foi criado"]})}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.strong,{children:"Inclua esses comandos em pipelines de CI/CD"})," para automa\xe7\xe3o da qualidade"]}),"\n"]}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h2,{id:"fluxo-de-trabalho-profissional",children:"Fluxo de Trabalho Profissional"}),"\n",(0,n.jsxs)(a.ol,{children:["\n",(0,n.jsx)(a.li,{children:"Escreve ou edita o c\xf3digo"}),"\n",(0,n.jsxs)(a.li,{children:["Roda ",(0,n.jsx)(a.code,{children:"terraform fmt"})," para padronizar"]}),"\n",(0,n.jsxs)(a.li,{children:["Roda ",(0,n.jsx)(a.code,{children:"terraform validate"})," para checar erros"]}),"\n",(0,n.jsxs)(a.li,{children:["Roda ",(0,n.jsx)(a.code,{children:"terraform plan"})," para ver as mudan\xe7as"]}),"\n",(0,n.jsxs)(a.li,{children:["Roda ",(0,n.jsx)(a.code,{children:"terraform apply"})," para aplicar"]}),"\n",(0,n.jsxs)(a.li,{children:["Usa ",(0,n.jsx)(a.code,{children:"terraform show"})," para inspecionar resultados"]}),"\n"]}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.p,{children:"Esses comandos fazem parte da rotina de quem escreve c\xf3digo Terraform de forma profissional. Adote eles no seu fluxo e leve seu projeto a outro n\xedvel!"})]})}function m(e={}){const{wrapper:a}={...(0,d.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,a,r)=>{r.d(a,{R:()=>i,x:()=>s});var o=r(6540);const n={},d=o.createContext(n);function i(e){const a=o.useContext(d);return o.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),o.createElement(d.Provider,{value:a},e.children)}}}]);