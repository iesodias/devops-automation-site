"use strict";(self.webpackChunkdevops_automation_site=self.webpackChunkdevops_automation_site||[]).push([[4098],{6039:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>t,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"checkov-integracoes","title":"Aula 15 - Integra\xe7\xe3o do Checkov com GitHub Actions","description":"Introdu\xe7\xe3o","source":"@site/curso-terraform-udemy/23-checkov-integracoes.md","sourceDirName":".","slug":"/checkov-integracoes","permalink":"/udemy/terraform-automacao/checkov-integracoes","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":23,"frontMatter":{"id":"checkov-integracoes","title":"Aula 15 - Integra\xe7\xe3o do Checkov com GitHub Actions","noindex":true}}');var s=n(4848),c=n(8453);const i={id:"checkov-integracoes",title:"Aula 15 - Integra\xe7\xe3o do Checkov com GitHub Actions",noindex:!0},a="Integra\xe7\xe3o do Checkov com GitHub Actions",t={},l=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"O que voc\xea precisa",id:"o-que-voc\xea-precisa",level:2},{value:"Exemplo de workflow com Checkov",id:"exemplo-de-workflow-com-checkov",level:2},{value:"Explica\xe7\xe3o das op\xe7\xf5es",id:"explica\xe7\xe3o-das-op\xe7\xf5es",level:2},{value:"Output esperado no GitHub Actions",id:"output-esperado-no-github-actions",level:2},{value:"Melhores pr\xe1ticas",id:"melhores-pr\xe1ticas",level:2},{value:"Conclus\xe3o",id:"conclus\xe3o",level:2}];function d(e){const o={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.header,{children:(0,s.jsx)(o.h1,{id:"integra\xe7\xe3o-do-checkov-com-github-actions",children:"Integra\xe7\xe3o do Checkov com GitHub Actions"})}),"\n",(0,s.jsx)(o.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,s.jsx)(o.p,{children:"Integrar o Checkov com o GitHub Actions \xe9 uma forma eficaz de garantir que sua infraestrutura como c\xf3digo seja validada automaticamente em cada push ou pull request. Com isso, voc\xea garante seguran\xe7a e conformidade de forma automatizada, diretamente no seu fluxo de CI/CD."}),"\n",(0,s.jsx)(o.h2,{id:"o-que-voc\xea-precisa",children:"O que voc\xea precisa"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsx)(o.li,{children:"Um reposit\xf3rio no GitHub contendo c\xf3digo Terraform"}),"\n",(0,s.jsxs)(o.li,{children:["Um arquivo ",(0,s.jsx)(o.code,{children:".github/workflows/checkov.yml"})]}),"\n"]}),"\n",(0,s.jsx)(o.h2,{id:"exemplo-de-workflow-com-checkov",children:"Exemplo de workflow com Checkov"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-yaml",children:"name: Terraform Security Scan\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  checkov-scan:\n    name: Checkov Scan\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout do reposit\xf3rio\n        uses: actions/checkout@v3\n\n      - name: Instalar Checkov\n        uses: bridgecrewio/checkov-action@master\n        with:\n          directory: ./infra\n          quiet: true\n          soft_fail: false\n          output_format: cli\n"})}),"\n",(0,s.jsx)(o.h2,{id:"explica\xe7\xe3o-das-op\xe7\xf5es",children:"Explica\xe7\xe3o das op\xe7\xf5es"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.code,{children:"directory"}),": caminho do diret\xf3rio Terraform"]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.code,{children:"quiet"}),": suprime logs menos relevantes"]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.code,{children:"soft_fail"}),": se ",(0,s.jsx)(o.code,{children:"true"}),", n\xe3o falha o pipeline mesmo com erro"]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.code,{children:"output_format"}),": formato do relat\xf3rio (cli, json, sarif, etc.)"]}),"\n"]}),"\n",(0,s.jsx)(o.h2,{id:"output-esperado-no-github-actions",children:"Output esperado no GitHub Actions"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsx)(o.li,{children:"Checkov ser\xe1 executado automaticamente"}),"\n",(0,s.jsx)(o.li,{children:"Ser\xe3o listados os checks que passaram e os que falharam"}),"\n",(0,s.jsxs)(o.li,{children:["Em caso de falhas, o PR/push pode ser bloqueado (se ",(0,s.jsx)(o.code,{children:"soft_fail: false"}),")"]}),"\n"]}),"\n",(0,s.jsx)(o.h2,{id:"melhores-pr\xe1ticas",children:"Melhores pr\xe1ticas"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsx)(o.li,{children:"Rode o Checkov em todos os pull requests"}),"\n",(0,s.jsxs)(o.li,{children:["Combine com ",(0,s.jsx)(o.code,{children:"terraform fmt"})," e ",(0,s.jsx)(o.code,{children:"terraform validate"})," para valida\xe7\xe3o completa"]}),"\n",(0,s.jsxs)(o.li,{children:["Use ",(0,s.jsx)(o.code,{children:"output_format: sarif"})," para integrar com GitHub Code Scanning"]}),"\n",(0,s.jsxs)(o.li,{children:["Configure ",(0,s.jsx)(o.code,{children:"soft_fail"})," para ",(0,s.jsx)(o.code,{children:"true"})," em fase inicial e ",(0,s.jsx)(o.code,{children:"false"})," em ambientes mais restritivos"]}),"\n",(0,s.jsx)(o.li,{children:"Armazene relat\xf3rios como artefatos para auditoria futura"}),"\n"]}),"\n",(0,s.jsx)(o.h2,{id:"conclus\xe3o",children:"Conclus\xe3o"}),"\n",(0,s.jsx)(o.p,{children:"Integrar o Checkov ao GitHub Actions \xe9 uma forma simples e eficaz de implementar seguran\xe7a e conformidade como parte nativa do seu ciclo de desenvolvimento. Automatizar essas checagens reduz riscos e aumenta a confian\xe7a nas entregas de infraestrutura."})]})}function u(e={}){const{wrapper:o}={...(0,c.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>i,x:()=>a});var r=n(6540);const s={},c=r.createContext(s);function i(e){const o=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(c.Provider,{value:o},e.children)}}}]);