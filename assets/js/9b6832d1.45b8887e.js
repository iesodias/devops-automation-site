"use strict";(self.webpackChunkdevops_automation_site=self.webpackChunkdevops_automation_site||[]).push([[778],{843:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>t,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"variaveis-outputs","title":"Aula 3 - Deixando o C\xf3digo Inteligente com Vari\xe1veis e Outputs","description":"---","source":"@site/curso-terraform-udemy/04-variaveis-outputs.md","sourceDirName":".","slug":"/variaveis-outputs","permalink":"/udemy/terraform-automacao/variaveis-outputs","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"variaveis-outputs","title":"Aula 3 - Deixando o C\xf3digo Inteligente com Vari\xe1veis e Outputs","noindex":true},"sidebar":"tutorialSidebar","previous":{"title":"Aula 2 - O Ciclo de Vida Essencial do Terraform","permalink":"/udemy/terraform-automacao/ciclo-terraform"},"next":{"title":"Aula 4 - Tipos de Vari\xe1veis no Terraform","permalink":"/udemy/terraform-automacao/tipos-variaveis"}}');var n=a(4848),s=a(8453);const t={id:"variaveis-outputs",title:"Aula 3 - Deixando o C\xf3digo Inteligente com Vari\xe1veis e Outputs",noindex:!0},i="Aula 3: Deixando o C\xf3digo Inteligente com Vari\xe1veis e Outputs (Azure)",c={},l=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"O que s\xe3o Vari\xe1veis e Outputs?",id:"o-que-s\xe3o-vari\xe1veis-e-outputs",level:2},{value:"Explica\xe7\xe3o T\xe9cnica",id:"explica\xe7\xe3o-t\xe9cnica",level:2},{value:"Vari\xe1veis",id:"vari\xe1veis",level:3},{value:"Outputs",id:"outputs",level:3},{value:"Comandos de Refer\xeancia",id:"comandos-de-refer\xeancia",level:2},{value:"Exemplo Pr\xe1tico",id:"exemplo-pr\xe1tico",level:2},{value:"Estrutura dos arquivos:",id:"estrutura-dos-arquivos",level:3},{value:"Output Esperado",id:"output-esperado",level:2},{value:"<code>terraform plan</code>",id:"terraform-plan",level:3},{value:"<code>terraform apply</code>",id:"terraform-apply",level:3},{value:"Melhores Pr\xe1ticas",id:"melhores-pr\xe1ticas",level:2}];function d(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"aula-3-deixando-o-c\xf3digo-inteligente-com-vari\xe1veis-e-outputs-azure",children:"Aula 3: Deixando o C\xf3digo Inteligente com Vari\xe1veis e Outputs (Azure)"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,n.jsxs)(r.p,{children:['At\xe9 agora, usamos valores fixos ("hardcoded") no nosso c\xf3digo Terraform. Mas o que acontece se quisermos reutilizar esse c\xf3digo em diferentes ambientes ou passar valores dinamicamente? \xc9 aqui que entram as ',(0,n.jsx)(r.strong,{children:"vari\xe1veis"})," e os ",(0,n.jsx)(r.strong,{children:"outputs"}),"."]}),"\n",(0,n.jsx)(r.p,{children:"Eles s\xe3o essenciais para tornar o c\xf3digo mais flex\xedvel, reutiliz\xe1vel e profissional."}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"o-que-s\xe3o-vari\xe1veis-e-outputs",children:"O que s\xe3o Vari\xe1veis e Outputs?"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsxs)(r.strong,{children:["Vari\xe1veis (",(0,n.jsx)(r.code,{children:"variable"}),")"]}),": s\xe3o os ",(0,n.jsx)(r.strong,{children:"par\xe2metros de entrada"})," do seu c\xf3digo. Permitem passar valores din\xe2micos para os recursos."]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsxs)(r.strong,{children:["Outputs (",(0,n.jsx)(r.code,{children:"output"}),")"]}),": s\xe3o os ",(0,n.jsx)(r.strong,{children:"valores de sa\xedda"}),". Exibem informa\xe7\xf5es importantes ap\xf3s a cria\xe7\xe3o da infraestrutura, como nomes, IPs ou URLs."]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"explica\xe7\xe3o-t\xe9cnica",children:"Explica\xe7\xe3o T\xe9cnica"}),"\n",(0,n.jsx)(r.h3,{id:"vari\xe1veis",children:"Vari\xe1veis"}),"\n",(0,n.jsxs)(r.p,{children:["As vari\xe1veis s\xe3o declaradas usando o bloco ",(0,n.jsx)(r.code,{children:"variable"})," em um arquivo separado (por conven\xe7\xe3o, ",(0,n.jsx)(r.code,{children:"variables.tf"}),")."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-hcl",children:'# variables.tf\nvariable "nome_da_storage" {\n  type        = string\n  description = "Nome da Azure Storage Account"\n  default     = "storagelab123456"\n}\n'})}),"\n",(0,n.jsx)(r.p,{children:"Para usar essa vari\xe1vel em um recurso:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-hcl",children:'# main.tf\nresource "azurerm_storage_account" "storage" {\n  name                     = var.nome_da_storage\n  resource_group_name      = azurerm_resource_group.rg.name\n  location                 = azurerm_resource_group.rg.location\n  account_tier             = "Standard"\n  account_replication_type = "LRS"\n}\n'})}),"\n",(0,n.jsx)(r.h3,{id:"outputs",children:"Outputs"}),"\n",(0,n.jsxs)(r.p,{children:["Os outputs s\xe3o declarados em um bloco ",(0,n.jsx)(r.code,{children:"output"})," (geralmente no arquivo ",(0,n.jsx)(r.code,{children:"outputs.tf"}),")."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-hcl",children:'# outputs.tf\noutput "endpoint_da_storage" {\n  description = "URL da Azure Storage Account."\n  value       = azurerm_storage_account.storage.primary_blob_endpoint\n}\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"comandos-de-refer\xeancia",children:"Comandos de Refer\xeancia"}),"\n",(0,n.jsx)(r.p,{children:"Crie os arquivos com o c\xf3digo acima e execute:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"terraform init\nterraform plan\nterraform apply\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"exemplo-pr\xe1tico",children:"Exemplo Pr\xe1tico"}),"\n",(0,n.jsx)(r.h3,{id:"estrutura-dos-arquivos",children:"Estrutura dos arquivos:"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"variables.tf"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-hcl",children:'variable "nome_da_storage" {\n  type        = string\n  description = "Nome da Azure Storage Account"\n  default     = "storagelab123456"\n}\n'})}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"main.tf"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-hcl",children:'provider "azurerm" {\n  features {}\n}\n\nresource "azurerm_resource_group" "rg" {\n  name     = "rg-teste"\n  location = "East US"\n}\n\nresource "azurerm_storage_account" "storage" {\n  name                     = var.nome_da_storage\n  resource_group_name      = azurerm_resource_group.rg.name\n  location                 = azurerm_resource_group.rg.location\n  account_tier             = "Standard"\n  account_replication_type = "LRS"\n}\n'})}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"outputs.tf"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-hcl",children:'output "endpoint_da_storage" {\n  description = "URL da Azure Storage Account."\n  value       = azurerm_storage_account.storage.primary_blob_endpoint\n}\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"output-esperado",children:"Output Esperado"}),"\n",(0,n.jsx)(r.h3,{id:"terraform-plan",children:(0,n.jsx)(r.code,{children:"terraform plan"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-text",children:'Terraform will perform the following actions:\n\n  # azurerm_storage_account.storage will be created\n  + name                     = "storagelab123456"\n  + resource_group_name     = "rg-teste"\n  + location                = "East US"\n  + primary_blob_endpoint   = (known after apply)\n\nPlan: 2 to add, 0 to change, 0 to destroy.\n'})}),"\n",(0,n.jsx)(r.h3,{id:"terraform-apply",children:(0,n.jsx)(r.code,{children:"terraform apply"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-text",children:'azurerm_resource_group.rg: Creating...\nazurerm_storage_account.storage: Creating...\nazurerm_storage_account.storage: Creation complete after 30s [id=/subscriptions/...]\n\nApply complete! Resources: 2 added, 0 changed, 0 destroyed.\n\nOutputs:\n\nendpoint_da_storage = "https://storagelab123456.blob.core.windows.net/"\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"melhores-pr\xe1ticas",children:"Melhores Pr\xe1ticas"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Separe vari\xe1veis em arquivos ",(0,n.jsx)(r.code,{children:"variables.tf"})," para organizar melhor seu projeto"]}),"\n",(0,n.jsxs)(r.li,{children:["Use ",(0,n.jsx)(r.code,{children:"description"})," em todas as vari\xe1veis e outputs para facilitar a compreens\xe3o"]}),"\n",(0,n.jsx)(r.li,{children:"Evite hardcoded: use vari\xe1veis sempre que o valor puder mudar entre ambientes"}),"\n",(0,n.jsx)(r.li,{children:"Os outputs ajudam a exportar dados entre m\xf3dulos e para scripts externos"}),"\n",(0,n.jsxs)(r.li,{children:["Combine com ",(0,n.jsx)(r.code,{children:".tfvars"})," para facilitar a troca de ambientes (dev, prod, etc)"]}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,r,a)=>{a.d(r,{R:()=>t,x:()=>i});var o=a(6540);const n={},s=o.createContext(n);function t(e){const r=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),o.createElement(s.Provider,{value:r},e.children)}}}]);