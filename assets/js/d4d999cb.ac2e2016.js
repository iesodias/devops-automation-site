"use strict";(self.webpackChunkdevops_automation_site=self.webpackChunkdevops_automation_site||[]).push([[9487],{8453:(e,a,o)=>{o.d(a,{R:()=>r,x:()=>c});var s=o(6540);const n={},t=s.createContext(n);function r(e){const a=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function c(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),s.createElement(t.Provider,{value:a},e.children)}},9781:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>i,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"modulo-04-avancado/artefatos","title":"Artefatos e Cache","description":"Introdu\xe7\xe3o","source":"@site/curso-github-actions-udemy/modulo-04-avancado/06-artefatos-cache.md","sourceDirName":"modulo-04-avancado","slug":"/modulo-04-avancado/artefatos","permalink":"/udemy/github-actions-automacao/modulo-04-avancado/artefatos","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"artefatos","title":"Artefatos e Cache"},"sidebar":"tutorialSidebar","previous":{"title":"Matriz e Concorr\xeancia","permalink":"/udemy/github-actions-automacao/modulo-04-avancado/matrix-conc"},"next":{"title":"Logs, Debug","permalink":"/udemy/github-actions-automacao/modulo-04-avancado/logs-debug"}}');var n=o(4848),t=o(8453);const r={id:"artefatos",title:"Artefatos e Cache"},c="Artefatos e Cache: Boas Pr\xe1ticas",i={},d=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"Defini\xe7\xe3o",id:"defini\xe7\xe3o",level:2},{value:"Explica\xe7\xe3o T\xe9cnica",id:"explica\xe7\xe3o-t\xe9cnica",level:2},{value:"Exemplo",id:"exemplo",level:2},{value:"Conclus\xe3o",id:"conclus\xe3o",level:2}];function l(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.header,{children:(0,n.jsx)(a.h1,{id:"artefatos-e-cache-boas-pr\xe1ticas",children:"Artefatos e Cache: Boas Pr\xe1ticas"})}),"\n",(0,n.jsx)(a.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,n.jsx)(a.p,{children:"Artefatos servem para compartilhar arquivos entre jobs e preservar resultados (por exemplo, relat\xf3rios). Cache armazena depend\xeancias para acelerar execu\xe7\xf5es futuras. Usar ambos corretamente reduz tempo de pipeline e evita transfer\xeancias e downloads repetidos."}),"\n",(0,n.jsx)(a.h2,{id:"defini\xe7\xe3o",children:"Defini\xe7\xe3o"}),"\n",(0,n.jsxs)(a.p,{children:["Artefatos s\xe3o pacotes de arquivos enviados ao storage do GitHub Actions e recuperados em outros jobs ou execu\xe7\xf5es. Cache guarda arquivos no storage de cache do Actions com chaves (",(0,n.jsx)(a.code,{children:"key"}),") que determinam quando reutilizar o que j\xe1 foi salvo. Chaves est\xe1veis e previs\xedveis s\xe3o essenciais para bons acertos de cache."]}),"\n",(0,n.jsx)(a.p,{children:"Links oficiais:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsxs)(a.li,{children:["Upload/Download Artifact: ",(0,n.jsx)(a.a,{href:"https://docs.github.com/pt/actions/using-workflows/storing-workflow-data-as-artifacts",children:"https://docs.github.com/pt/actions/using-workflows/storing-workflow-data-as-artifacts"})]}),"\n",(0,n.jsxs)(a.li,{children:["Cache: ",(0,n.jsx)(a.a,{href:"https://docs.github.com/pt/actions/using-workflows/caching-dependencies-to-speed-up-workflows",children:"https://docs.github.com/pt/actions/using-workflows/caching-dependencies-to-speed-up-workflows"})]}),"\n"]}),"\n",(0,n.jsx)(a.h2,{id:"explica\xe7\xe3o-t\xe9cnica",children:"Explica\xe7\xe3o T\xe9cnica"}),"\n",(0,n.jsxs)(a.p,{children:["Para artefatos, utilize as actions oficiais ",(0,n.jsx)(a.code,{children:"actions/upload-artifact"})," e ",(0,n.jsx)(a.code,{children:"actions/download-artifact"}),". Defina nomes que indiquem conte\xfado e, se necess\xe1rio, expire os artefatos automaticamente conforme pol\xedtica do reposit\xf3rio. Artefatos t\xeam limites de tamanho por arquivo e por reposit\xf3rio \u2014 evite enviar diret\xf3rios inteiros sem necessidade."]}),"\n",(0,n.jsxs)(a.p,{children:["Para cache, ",(0,n.jsx)(a.code,{children:"actions/cache"})," usa uma ",(0,n.jsx)(a.code,{children:"key"})," e, opcionalmente, ",(0,n.jsx)(a.code,{children:"restore-keys"})," para fallback. ",(0,n.jsx)(a.code,{children:"hashFiles()"})," ajuda a invalidar cache quando arquivos de lock mudam. Seja criterioso no ",(0,n.jsx)(a.code,{children:"path"})," para evitar caches grandes e n\xe3o determin\xedsticos. Lembre-se de que o cache n\xe3o \xe9 um artefato: ele n\xe3o serve para compartilhar resultados entre jobs na mesma execu\xe7\xe3o."]}),"\n",(0,n.jsxs)(a.p,{children:["Boas pr\xe1ticas: use ",(0,n.jsx)(a.code,{children:"hashFiles('**/package-lock.json')"})," (ou equivalente) para chaves reprodut\xedveis, mantenha caches por ecossistema (Node, Python) e evite armazenar diret\xf3rios com artefatos gerados que variam a cada execu\xe7\xe3o."]}),"\n",(0,n.jsx)(a.h2,{id:"exemplo",children:"Exemplo"}),"\n",(0,n.jsx)(a.p,{children:"Exemplo simples com cache de depend\xeancias e upload de um relat\xf3rio como artefato."}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-yaml",children:'name: Aula 23 \u2014 Artefatos e Cache\non: { workflow_dispatch: }\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Preparar chave de cache\n        run: |\n          echo "Usando hash de arquivos de lock para cache"\n      - name: Cache de depend\xeancias Node\n        uses: actions/cache@v4\n        with:\n          path: ~/.npm\n          key: npm-${{ runner.os }}-${{ hashFiles(\'**/package-lock.json\') }}\n          restore-keys: |\n            npm-${{ runner.os }}-\n      - name: Instalar deps e gerar relat\xf3rio\n        run: |\n          echo "Instalando depend\xeancias e gerando relat\xf3rio..."\n          echo "Relat\xf3rio gerado" > report.txt\n      - name: Upload do relat\xf3rio\n        uses: actions/upload-artifact@v4\n        with:\n          name: build-report\n          path: report.txt\n'})}),"\n",(0,n.jsxs)(a.p,{children:["O job usa uma chave de cache baseada no SO e no hash dos lockfiles para acelerar instala\xe7\xf5es em runs futuros e, ao final, sobe um arquivo ",(0,n.jsx)(a.code,{children:"report.txt"})," como artefato para consulta ou consumo posterior."]}),"\n",(0,n.jsx)(a.h2,{id:"conclus\xe3o",children:"Conclus\xe3o"}),"\n",(0,n.jsx)(a.p,{children:"Artefatos e cache resolvem problemas diferentes: compartilhamento de arquivos versus acelera\xe7\xe3o de depend\xeancias. Ao nomear bem, escolher caminhos e chaves reprodut\xedveis e respeitar limites, voc\xea reduz o tempo total dos workflows sem acumular dados desnecess\xe1rios."})]})}function u(e={}){const{wrapper:a}={...(0,t.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}}}]);