"use strict";(self.webpackChunkdevops_automation_site=self.webpackChunkdevops_automation_site||[]).push([[8127],{7001:(e,r,o)=>{o.r(r),o.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"ciclo-terraform","title":"Aula 2 - O Ciclo de Vida Essencial do Terraform","description":"---","source":"@site/curso-terraform-udemy/03-ciclo-vida-terraform.md","sourceDirName":".","slug":"/ciclo-terraform","permalink":"/udemy/terraform-automacao/ciclo-terraform","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"ciclo-terraform","title":"Aula 2 - O Ciclo de Vida Essencial do Terraform","noindex":true},"sidebar":"tutorialSidebar","previous":{"title":"Aula 1 - A Sintaxe do Terraform (HCL)","permalink":"/udemy/terraform-automacao/hcl-intro"},"next":{"title":"Aula 3 - Deixando o C\xf3digo Inteligente com Vari\xe1veis e Outputs","permalink":"/udemy/terraform-automacao/variaveis-outputs"}}');var a=o(4848),s=o(8453);const i={id:"ciclo-terraform",title:"Aula 2 - O Ciclo de Vida Essencial do Terraform",noindex:!0},c="Aula 2: O Ciclo de Vida Essencial do Terraform",l={},d=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"O que \xe9 o Ciclo de Vida no Terraform?",id:"o-que-\xe9-o-ciclo-de-vida-no-terraform",level:2},{value:"Explica\xe7\xe3o T\xe9cnica",id:"explica\xe7\xe3o-t\xe9cnica",level:2},{value:"Comandos de Refer\xeancia",id:"comandos-de-refer\xeancia",level:2},{value:"1. <code>terraform init</code>",id:"1-terraform-init",level:3},{value:"2. <code>terraform plan</code>",id:"2-terraform-plan",level:3},{value:"3. <code>terraform apply</code>",id:"3-terraform-apply",level:3},{value:"4. <code>terraform destroy</code>",id:"4-terraform-destroy",level:3},{value:"Exemplo Pr\xe1tico",id:"exemplo-pr\xe1tico",level:2},{value:"Output Esperado",id:"output-esperado",level:2},{value:"<code>terraform init</code>",id:"terraform-init",level:3},{value:"<code>terraform plan</code>",id:"terraform-plan",level:3},{value:"<code>terraform apply</code>",id:"terraform-apply",level:3},{value:"<code>terraform destroy</code>",id:"terraform-destroy",level:3},{value:"Melhores Pr\xe1ticas",id:"melhores-pr\xe1ticas",level:2}];function t(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.header,{children:(0,a.jsx)(r.h1,{id:"aula-2-o-ciclo-de-vida-essencial-do-terraform",children:"Aula 2: O Ciclo de Vida Essencial do Terraform"})}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,a.jsxs)(r.p,{children:["Quando voc\xea escreve seu c\xf3digo Terraform, ele ainda n\xe3o faz nada por si s\xf3. \xc9 preciso instruir o Terraform a ",(0,a.jsx)(r.strong,{children:"inicializar o projeto"}),", ",(0,a.jsx)(r.strong,{children:"planejar as mudan\xe7as"})," e ",(0,a.jsx)(r.strong,{children:"aplicar essas mudan\xe7as na infraestrutura"}),". Esse processo \xe9 conhecido como o ",(0,a.jsx)(r.strong,{children:"ciclo de vida essencial"})," do Terraform."]}),"\n",(0,a.jsx)(r.p,{children:"Vamos conhecer os quatro comandos fundamentais:"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.code,{children:"terraform init"})}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.code,{children:"terraform plan"})}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.code,{children:"terraform apply"})}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.code,{children:"terraform destroy"})}),"\n"]}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h2,{id:"o-que-\xe9-o-ciclo-de-vida-no-terraform",children:"O que \xe9 o Ciclo de Vida no Terraform?"}),"\n",(0,a.jsx)(r.p,{children:"\xc9 o fluxo de trabalho b\xe1sico para provisionar e gerenciar infraestrutura com Terraform. Seguindo essa ordem, voc\xea garante que o ambiente esteja sempre consistente, previs\xedvel e seguro."}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h2,{id:"explica\xe7\xe3o-t\xe9cnica",children:"Explica\xe7\xe3o T\xe9cnica"}),"\n",(0,a.jsx)(r.p,{children:"O ciclo de vida funciona em quatro passos:"}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.strong,{children:"Inicializa\xe7\xe3o"}),": prepara o ambiente, instala os plugins e define o backend."]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.strong,{children:"Planejamento"}),": compara o c\xf3digo com o estado atual e mostra o que ser\xe1 feito."]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.strong,{children:"Aplica\xe7\xe3o"}),": executa o plano e cria ou altera a infraestrutura."]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.strong,{children:"Destrui\xe7\xe3o"}),": remove tudo que foi criado para liberar recursos."]}),"\n"]}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h2,{id:"comandos-de-refer\xeancia",children:"Comandos de Refer\xeancia"}),"\n",(0,a.jsxs)(r.h3,{id:"1-terraform-init",children:["1. ",(0,a.jsx)(r.code,{children:"terraform init"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"terraform init\n"})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Inicia o diret\xf3rio de trabalho"}),"\n",(0,a.jsx)(r.li,{children:"Baixa os plugins dos providers declarados (ex: AWS)"}),"\n",(0,a.jsxs)(r.li,{children:["Prepara o backend para o ",(0,a.jsx)(r.code,{children:".tfstate"})]}),"\n",(0,a.jsxs)(r.li,{children:["Necess\xe1rio rodar ",(0,a.jsx)(r.strong,{children:"apenas uma vez"})," por projeto (ou quando muda provider)"]}),"\n"]}),"\n",(0,a.jsxs)(r.h3,{id:"2-terraform-plan",children:["2. ",(0,a.jsx)(r.code,{children:"terraform plan"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"terraform plan\n"})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Planeja o que ser\xe1 criado, alterado ou destru\xeddo"}),"\n",(0,a.jsx)(r.li,{children:'Gera um "plano de execu\xe7\xe3o"'}),"\n",(0,a.jsx)(r.li,{children:"Serve como checklist de seguran\xe7a"}),"\n"]}),"\n",(0,a.jsxs)(r.h3,{id:"3-terraform-apply",children:["3. ",(0,a.jsx)(r.code,{children:"terraform apply"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"terraform apply\n"})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Executa o plano"}),"\n",(0,a.jsxs)(r.li,{children:["Solicita confirma\xe7\xe3o (digite ",(0,a.jsx)(r.code,{children:"yes"})," para continuar)"]}),"\n",(0,a.jsx)(r.li,{children:"Aplica as mudan\xe7as reais na infraestrutura"}),"\n"]}),"\n",(0,a.jsxs)(r.h3,{id:"4-terraform-destroy",children:["4. ",(0,a.jsx)(r.code,{children:"terraform destroy"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"terraform destroy\n"})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"L\xea o estado atual e planeja a remo\xe7\xe3o de todos os recursos"}),"\n",(0,a.jsx)(r.li,{children:"\xd3timo para limpar ambientes de teste ou desenvolvimento"}),"\n"]}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h2,{id:"exemplo-pr\xe1tico",children:"Exemplo Pr\xe1tico"}),"\n",(0,a.jsxs)(r.p,{children:["Com o seguinte c\xf3digo em ",(0,a.jsx)(r.code,{children:"main.tf"}),":"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-hcl",children:'provider "aws" {\n  region = "us-east-1"\n}\n\nresource "aws_s3_bucket" "meu_bucket_do_curso" {\n  bucket = "meu-bucket-do-terraform-curso"\n  acl    = "private"\n}\n'})}),"\n",(0,a.jsx)(r.p,{children:"Execute os comandos na ordem:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"terraform init\nterraform plan\nterraform apply\n"})}),"\n",(0,a.jsx)(r.p,{children:"Depois, para remover tudo:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"terraform destroy\n"})}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h2,{id:"output-esperado",children:"Output Esperado"}),"\n",(0,a.jsx)(r.h3,{id:"terraform-init",children:(0,a.jsx)(r.code,{children:"terraform init"})}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-text",children:"Initializing the backend...\nInitializing provider plugins...\n- Finding latest version of hashicorp/aws...\n- Installing hashicorp/aws v5.0.0...\n- Installed hashicorp/aws v5.0.0 (signed by HashiCorp)\n\nTerraform has been successfully initialized!\n"})}),"\n",(0,a.jsx)(r.h3,{id:"terraform-plan",children:(0,a.jsx)(r.code,{children:"terraform plan"})}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-text",children:'Terraform will perform the following actions:\n\n  # aws_s3_bucket.meu_bucket_do_curso will be created\n  + resource "aws_s3_bucket" "meu_bucket_do_curso" {\n      + acl    = "private"\n      + bucket = "meu-bucket-do-terraform-curso"\n      ...\n    }\n\nPlan: 1 to add, 0 to change, 0 to destroy.\n'})}),"\n",(0,a.jsx)(r.h3,{id:"terraform-apply",children:(0,a.jsx)(r.code,{children:"terraform apply"})}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-text",children:'Terraform will perform the following actions:\n\n  # aws_s3_bucket.meu_bucket_do_curso will be created\n  + resource "aws_s3_bucket" "meu_bucket_do_curso" {\n      + acl    = "private"\n      + bucket = "meu-bucket-do-terraform-curso"\n      ...\n    }\n\nPlan: 1 to add, 0 to change, 0 to destroy.\n\nDo you want to perform these actions?\n  Terraform will perform the actions described above.\n  Only \'yes\' will be accepted to approve.\n\n  Enter a value: yes\n\naws_s3_bucket.meu_bucket_do_curso: Creating...\naws_s3_bucket.meu_bucket_do_curso: Creation complete after 2s [id=meu-bucket-do-terraform-curso]\n\nApply complete! Resources: 1 added, 0 changed, 0 destroyed.\n'})}),"\n",(0,a.jsx)(r.h3,{id:"terraform-destroy",children:(0,a.jsx)(r.code,{children:"terraform destroy"})}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-text",children:'Terraform will destroy the following resources:\n\n  # aws_s3_bucket.meu_bucket_do_curso will be destroyed\n  - resource "aws_s3_bucket" "meu_bucket_do_curso" {\n      - acl    = "private" -> null\n      - bucket = "meu-bucket-do-terraform-curso" -> null\n      ...\n    }\n\nPlan: 0 to add, 0 to change, 1 to destroy.\n\nDo you really want to destroy all resources?\n  Terraform will destroy all your managed infrastructure.\n  There is no undo. Only \'yes\' will be accepted to confirm.\n\n  Enter a value: yes\n\naws_s3_bucket.meu_bucket_do_curso: Destroying...\naws_s3_bucket.meu_bucket_do_curso: Destruction complete after 1s\n\nDestroy complete! Resources: 1 destroyed.\n'})}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h2,{id:"melhores-pr\xe1ticas",children:"Melhores Pr\xe1ticas"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["Sempre rode ",(0,a.jsx)(r.code,{children:"terraform init"})," ao iniciar um novo projeto"]}),"\n",(0,a.jsxs)(r.li,{children:["Nunca aplique sem revisar o plano com ",(0,a.jsx)(r.code,{children:"terraform plan"})]}),"\n",(0,a.jsxs)(r.li,{children:["Use ",(0,a.jsx)(r.code,{children:"terraform apply -auto-approve"})," com cuidado, apenas em scripts automatizados"]}),"\n",(0,a.jsxs)(r.li,{children:["Prefira ",(0,a.jsx)(r.code,{children:"terraform destroy"})," em ambientes tempor\xe1rios ou de teste"]}),"\n",(0,a.jsxs)(r.li,{children:["Verifique o ",(0,a.jsx)(r.code,{children:"terraform.tfstate"})," e, se poss\xedvel, use backend remoto com lock"]}),"\n"]}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.p,{children:"Com esses quatro comandos, voc\xea j\xe1 domina o ciclo essencial do Terraform."})]})}function u(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(t,{...e})}):t(e)}},8453:(e,r,o)=>{o.d(r,{R:()=>i,x:()=>c});var n=o(6540);const a={},s=n.createContext(a);function i(e){const r=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(s.Provider,{value:r},e.children)}}}]);