"use strict";(self.webpackChunkdevops_automation_site=self.webpackChunkdevops_automation_site||[]).push([[4920],{8453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>t});var s=n(6540);const o={},i=s.createContext(o);function a(e){const r=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(i.Provider,{value:r},e.children)}},9245:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>t,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"24-sentinel","title":"Lab 24 - Sentinel no Terraform Cloud","description":"Introdu\xe7\xe3o","source":"@site/curso-terraform-udemy/42-terraform-sentinel.md","sourceDirName":".","slug":"/24-sentinel","permalink":"/udemy/terraform-automacao/24-sentinel","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":42,"frontMatter":{"id":"24-sentinel","title":"Lab 24 - Sentinel no Terraform Cloud","noindex":true},"sidebar":"tutorialSidebar","previous":{"title":"Lab 23 - Terraform Cloud - Introdu\xe7\xe3o","permalink":"/udemy/terraform-automacao/23-terraform-cloud"},"next":{"title":"Lab 25 - Criando um Resource Group no Azure com Terraform Cloud (Execu\xe7\xe3o Local)","permalink":"/udemy/terraform-automacao/25-lab-sentinel-tfc"}}');var o=n(4848),i=n(8453);const a={id:"24-sentinel",title:"Lab 24 - Sentinel no Terraform Cloud",noindex:!0},t="Sentinel no Terraform Cloud",l={},d=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"O que \xe9 o Sentinel",id:"o-que-\xe9-o-sentinel",level:2},{value:"Quais recursos o Sentinel oferece no Terraform Cloud",id:"quais-recursos-o-sentinel-oferece-no-terraform-cloud",level:2},{value:"Terraform CLI vs Terraform Cloud (Sentinel)",id:"terraform-cli-vs-terraform-cloud-sentinel",level:2},{value:"Exemplo de pol\xedtica b\xe1sica",id:"exemplo-de-pol\xedtica-b\xe1sica",level:2},{value:"Boas pr\xe1ticas",id:"boas-pr\xe1ticas",level:2}];function c(e){const r={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"sentinel-no-terraform-cloud",children:"Sentinel no Terraform Cloud"})}),"\n",(0,o.jsx)(r.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,o.jsxs)(r.p,{children:["O Sentinel \xe9 uma ferramenta de ",(0,o.jsx)(r.strong,{children:"Policy as Code"})," da HashiCorp que permite definir regras de seguran\xe7a, conformidade e governan\xe7a para recursos gerenciados com Terraform. Ele \xe9 uma pe\xe7a essencial no Terraform Cloud (em planos Team & Governance ou superiores), especialmente para ambientes corporativos que exigem valida\xe7\xf5es antes do ",(0,o.jsx)(r.code,{children:"apply"}),"."]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"o-que-\xe9-o-sentinel",children:"O que \xe9 o Sentinel"}),"\n",(0,o.jsxs)(r.p,{children:["O ",(0,o.jsx)(r.strong,{children:"Sentinel"})," \xe9 um framework de pol\xedtica que permite restringir ou aprovar comportamentos com base em regras declarativas. \xc9 usado principalmente com:"]}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"Terraform Cloud e Enterprise"}),"\n",(0,o.jsx)(r.li,{children:"Vault, Consul e Nomad (outros produtos HashiCorp)"}),"\n"]}),"\n",(0,o.jsx)(r.p,{children:"Com ele, voc\xea pode, por exemplo:"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"Impedir que VMs sejam criadas fora de uma determinada regi\xe3o"}),"\n",(0,o.jsx)(r.li,{children:"Garantir que certos tags estejam sempre presentes"}),"\n",(0,o.jsx)(r.li,{children:"Bloquear recursos com custo acima de um limite"}),"\n"]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"quais-recursos-o-sentinel-oferece-no-terraform-cloud",children:"Quais recursos o Sentinel oferece no Terraform Cloud"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Pol\xedticas obrigat\xf3rias (enforced):"})," bloqueiam o ",(0,o.jsx)(r.code,{children:"apply"})," se n\xe3o forem satisfeitas"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Pol\xedticas informativas (advisory):"})," avisam, mas n\xe3o impedem a aplica\xe7\xe3o"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Pol\xedticas permissivas (soft mandatory):"})," bloqueiam o ",(0,o.jsx)(r.code,{children:"apply"})," mas podem ser substitu\xeddas manualmente (override)"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Integra\xe7\xe3o com workspaces"}),": pol\xedticas podem ser aplicadas por workspace"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Acesso a dados do plan:"})," acesso ao plano de execu\xe7\xe3o para validar recursos, atributos, etc."]}),"\n"]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"terraform-cli-vs-terraform-cloud-sentinel",children:"Terraform CLI vs Terraform Cloud (Sentinel)"}),"\n",(0,o.jsxs)(r.table,{children:[(0,o.jsx)(r.thead,{children:(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.th,{children:"Funcionalidade"}),(0,o.jsx)(r.th,{children:"Terraform CLI (local)"}),(0,o.jsx)(r.th,{children:"Terraform Cloud + Sentinel"})]})}),(0,o.jsxs)(r.tbody,{children:[(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Execu\xe7\xe3o de pol\xedticas Sentinel"}),(0,o.jsx)(r.td,{children:"N\xe3o suporta"}),(0,o.jsx)(r.td,{children:"Sim"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"N\xedveis de pol\xedtica (advisory, etc)"}),(0,o.jsx)(r.td,{children:"N\xe3o"}),(0,o.jsx)(r.td,{children:"Sim"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsxs)(r.td,{children:["Integra\xe7\xe3o com ",(0,o.jsx)(r.code,{children:"plan"})]}),(0,o.jsx)(r.td,{children:"Manual via script"}),(0,o.jsx)(r.td,{children:"Autom\xe1tica"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:"Regras de compliance"}),(0,o.jsx)(r.td,{children:"Manual"}),(0,o.jsx)(r.td,{children:"Automatizadas"})]})]})]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"exemplo-de-pol\xedtica-b\xe1sica",children:"Exemplo de pol\xedtica b\xe1sica"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-hcl",children:'import "tfplan/v2"\n\nmain = rule {\n  all tfplan.resources.aws_instance as _, instances {\n    all instances as instance {\n      instance.applied.tags["Environment"] is not null\n    }\n  }\n}\n'})}),"\n",(0,o.jsxs)(r.p,{children:["Essa pol\xedtica garante que toda ",(0,o.jsx)(r.code,{children:"aws_instance"})," tenha uma tag ",(0,o.jsx)(r.code,{children:"Environment"})," definida."]}),"\n",(0,o.jsx)(r.hr,{}),"\n",(0,o.jsx)(r.h2,{id:"boas-pr\xe1ticas",children:"Boas pr\xe1ticas"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:["Use Sentinel para ",(0,o.jsx)(r.strong,{children:"padronizar ambientes"})," entre equipes"]}),"\n",(0,o.jsx)(r.li,{children:"Evite regras excessivamente restritivas (geram frustra\xe7\xe3o)"}),"\n",(0,o.jsxs)(r.li,{children:["Use ",(0,o.jsx)(r.code,{children:"advisory"})," para iniciar a cultura de pol\xedticas"]}),"\n",(0,o.jsx)(r.li,{children:"Documente cada pol\xedtica com coment\xe1rios claros"}),"\n",(0,o.jsxs)(r.li,{children:["Teste as pol\xedticas localmente com ",(0,o.jsx)(r.code,{children:"sentinel test"})," (dispon\xedvel no Sentinel CLI)"]}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);