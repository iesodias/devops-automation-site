"use strict";(globalThis.webpackChunkdevops_automation_site=globalThis.webpackChunkdevops_automation_site||[]).push([[8699],{7510:(e,o,r)=>{r.r(o),r.d(o,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"locals","title":"Aula 10 - Vari\xe1veis `locals` no Terraform","description":"Introdu\xe7\xe3o","source":"@site/curso-terraform-udemy/17-locals.md","sourceDirName":".","slug":"/locals","permalink":"/udemy/terraform-automacao/locals","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":17,"frontMatter":{"id":"locals","title":"Aula 10 - Vari\xe1veis `locals` no Terraform","noindex":true},"sidebar":"tutorialSidebar","previous":{"title":"Aula 9 - Workspaces no Terraform","permalink":"/udemy/terraform-automacao/workspaces"},"next":{"title":"Lab 1 - Criando um Resource Group no Azure com Terraform","permalink":"/udemy/terraform-automacao/lab-1-rg"}}');var s=r(4848),n=r(8453);const l={id:"locals",title:"Aula 10 - Vari\xe1veis `locals` no Terraform",noindex:!0},i="Vari\xe1veis locals no Terraform",c={},d=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"O que \xe9 o bloco <code>locals</code>",id:"o-que-\xe9-o-bloco-locals",level:2},{value:"Explica\xe7\xe3o t\xe9cnica",id:"explica\xe7\xe3o-t\xe9cnica",level:2},{value:"Comando(s)",id:"comandos",level:2},{value:"Exemplo pr\xe1tico",id:"exemplo-pr\xe1tico",level:2},{value:"<code>main.tf</code>",id:"maintf",level:3},{value:"Output esperado",id:"output-esperado",level:2},{value:"Melhores pr\xe1ticas",id:"melhores-pr\xe1ticas",level:2}];function t(e){const o={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.header,{children:(0,s.jsxs)(o.h1,{id:"vari\xe1veis-locals-no-terraform",children:["Vari\xe1veis ",(0,s.jsx)(o.code,{children:"locals"})," no Terraform"]})}),"\n",(0,s.jsx)(o.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,s.jsxs)(o.p,{children:["O Terraform permite criar ",(0,s.jsx)(o.strong,{children:"vari\xe1veis locais"})," com o bloco ",(0,s.jsx)(o.code,{children:"locals"}),", que s\xe3o \xf3timas para organizar e reaproveitar valores dentro do mesmo m\xf3dulo. Elas ajudam a deixar o c\xf3digo mais limpo, evitando repeti\xe7\xf5es e facilitando manuten\xe7\xe3o."]}),"\n",(0,s.jsxs)(o.h2,{id:"o-que-\xe9-o-bloco-locals",children:["O que \xe9 o bloco ",(0,s.jsx)(o.code,{children:"locals"})]}),"\n",(0,s.jsxs)(o.p,{children:["O bloco ",(0,s.jsx)(o.code,{children:"locals"})," define vari\xe1veis que s\xe3o usadas ",(0,s.jsx)(o.strong,{children:"apenas dentro do escopo atual"}),". Elas n\xe3o podem ser passadas como entrada nem exportadas como sa\xedda. S\xe3o \xf3timas para calcular valores, construir strings, ou definir padr\xf5es reutiliz\xe1veis."]}),"\n",(0,s.jsx)(o.h2,{id:"explica\xe7\xe3o-t\xe9cnica",children:"Explica\xe7\xe3o t\xe9cnica"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsxs)(o.li,{children:["O bloco ",(0,s.jsx)(o.code,{children:"locals"})," \xe9 definido com ",(0,s.jsx)(o.code,{children:"locals {}"})]}),"\n",(0,s.jsx)(o.li,{children:"Pode conter uma ou mais vari\xe1veis locais"}),"\n",(0,s.jsxs)(o.li,{children:["Acessadas com ",(0,s.jsx)(o.code,{children:"local.<nome>"})]}),"\n",(0,s.jsx)(o.li,{children:"Podem conter express\xf5es, concatena\xe7\xf5es, condi\xe7\xf5es e chamadas de fun\xe7\xf5es"}),"\n"]}),"\n",(0,s.jsx)(o.h2,{id:"comandos",children:"Comando(s)"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-bash",children:"terraform init\nterraform plan\nterraform apply\n"})}),"\n",(0,s.jsx)(o.h2,{id:"exemplo-pr\xe1tico",children:"Exemplo pr\xe1tico"}),"\n",(0,s.jsx)(o.h3,{id:"maintf",children:(0,s.jsx)(o.code,{children:"main.tf"})}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-hcl",children:'locals {\n  environment     = "dev"\n  resource_prefix = "app-${local.environment}"\n  location        = "eastus"\n}\n\nprovider "azurerm" {\n  features {}\n}\n\nresource "azurerm_resource_group" "rg" {\n  name     = "${local.resource_prefix}-rg"\n  location = local.location\n}\n'})}),"\n",(0,s.jsxs)(o.p,{children:["Esse c\xf3digo cria um grupo de recursos chamado ",(0,s.jsx)(o.code,{children:"app-dev-rg"})," na regi\xe3o ",(0,s.jsx)(o.code,{children:"eastus"}),", reutilizando os valores definidos nos locals."]}),"\n",(0,s.jsx)(o.h2,{id:"output-esperado",children:"Output esperado"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-bash",children:'Apply complete! Resources: 1 added, 0 changed, 0 destroyed.\n\nOutputs:\nazurerm_resource_group.rg:\n  name     = "app-dev-rg"\n  location = "eastus"\n'})}),"\n",(0,s.jsx)(o.h2,{id:"melhores-pr\xe1ticas",children:"Melhores pr\xe1ticas"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsxs)(o.li,{children:["Use ",(0,s.jsx)(o.code,{children:"locals"})," para evitar repeti\xe7\xf5es de strings e express\xf5es"]}),"\n",(0,s.jsx)(o.li,{children:"Nomeie os locals de forma clara e sem ambiguidade"}),"\n",(0,s.jsxs)(o.li,{children:["Evite colocar l\xf3gicas complexas demais nos ",(0,s.jsx)(o.code,{children:"locals"})," \u2014 mantenha simples"]}),"\n",(0,s.jsxs)(o.li,{children:["Combine com ",(0,s.jsx)(o.code,{children:"terraform.workspace"})," para gerar nomes din\xe2micos por ambiente"]}),"\n"]}),"\n",(0,s.jsx)(o.p,{children:"As vari\xe1veis locais s\xe3o ideais para manter o c\xf3digo organizado e DRY (Don't Repeat Yourself). Elas s\xe3o amplamente usadas em m\xf3dulos e projetos de m\xe9dio a grande porte no Terraform."})]})}function u(e={}){const{wrapper:o}={...(0,n.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},8453:(e,o,r)=>{r.d(o,{R:()=>l,x:()=>i});var a=r(6540);const s={},n=a.createContext(s);function l(e){const o=a.useContext(n);return a.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),a.createElement(n.Provider,{value:o},e.children)}}}]);