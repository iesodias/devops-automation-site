"use strict";(self.webpackChunkdevops_automation_site=self.webpackChunkdevops_automation_site||[]).push([[5924],{3731:(e,o,a)=>{a.r(o),a.d(o,{assets:()=>t,contentTitle:()=>i,default:()=>m,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"checkov-comandos","title":"Aula 14 - Checkov no Terraform - Comandos e Exemplos","description":"Introdu\xe7\xe3o","source":"@site/curso-terraform-udemy/22-checkov-pratico.md","sourceDirName":".","slug":"/checkov-comandos","permalink":"/udemy/terraform-automacao/checkov-comandos","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":22,"frontMatter":{"id":"checkov-comandos","title":"Aula 14 - Checkov no Terraform - Comandos e Exemplos","noindex":true},"sidebar":"tutorialSidebar","previous":{"title":"Aula 13 - Checkov - Conformidade e LGPD no Terraform","permalink":"/udemy/terraform-automacao/checkov-intro"},"next":{"title":"Aula 15 - Integra\xe7\xe3o do Checkov com GitHub Actions","permalink":"/udemy/terraform-automacao/checkov-github"}}');var n=a(4848),c=a(8453);const s={id:"checkov-comandos",title:"Aula 14 - Checkov no Terraform - Comandos e Exemplos",noindex:!0},i="Checkov no Terraform: Comandos e Exemplos Atualizados",t={},d=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"Explica\xe7\xe3o t\xe9cnica",id:"explica\xe7\xe3o-t\xe9cnica",level:2},{value:"Comandos principais",id:"comandos-principais",level:2},{value:"Exemplo pr\xe1tico",id:"exemplo-pr\xe1tico",level:2},{value:"Arquivo <code>main.tf</code>",id:"arquivo-maintf",level:3},{value:"Resultado esperado com <code>checkov -f main.tf</code>",id:"resultado-esperado-com-checkov--f-maintf",level:3},{value:"Melhores pr\xe1ticas",id:"melhores-pr\xe1ticas",level:2},{value:"Conclus\xe3o",id:"conclus\xe3o",level:2}];function l(e){const o={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.header,{children:(0,n.jsx)(o.h1,{id:"checkov-no-terraform-comandos-e-exemplos-atualizados",children:"Checkov no Terraform: Comandos e Exemplos Atualizados"})}),"\n",(0,n.jsx)(o.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,n.jsxs)(o.p,{children:["Ap\xf3s entender o que \xe9 o Checkov e sua import\xe2ncia para conformidade e seguran\xe7a em projetos Terraform, vamos agora focar na parte pr\xe1tica: ",(0,n.jsx)(o.strong,{children:"como usar o Checkov na linha de comando"})," com exemplos reais de aplica\xe7\xe3o."]}),"\n",(0,n.jsx)(o.p,{children:"Esta p\xe1gina traz uma s\xe9rie de comandos atualizados segundo a documenta\xe7\xe3o oficial do Checkov, com simula\xe7\xf5es de uso em ambientes Azure."}),"\n",(0,n.jsx)(o.h2,{id:"explica\xe7\xe3o-t\xe9cnica",children:"Explica\xe7\xe3o t\xe9cnica"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:["Checkov pode ser usado para escanear arquivos ",(0,n.jsx)(o.code,{children:".tf"}),", diret\xf3rios ou planos de execu\xe7\xe3o."]}),"\n",(0,n.jsx)(o.li,{children:"Permite definir checks por ID, severidade ou frameworks."}),"\n",(0,n.jsx)(o.li,{children:"Suporta integra\xe7\xe3o com tfvars, custom checks e gera\xe7\xe3o de baseline."}),"\n"]}),"\n",(0,n.jsx)(o.h2,{id:"comandos-principais",children:"Comandos principais"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"# Escanear um diret\xf3rio com arquivos Terraform\ncheckov -d ./infra\n\n# Escanear um arquivo espec\xedfico\ncheckov -f ./infra/main.tf\n\n# Listar todos os checks dispon\xedveis\ncheckov --list\n\n# Usar arquivo de vari\xe1veis tfvars\ncheckov -d ./infra --var-file dev.tfvars\n\n# Especificar checks por ID ou severidade\ncheckov -d ./infra --check MEDIUM,HIGH --skip-check CKV_AZURE_21\n\n# Formatar sa\xedda em JSON e salvar em arquivo\ncheckov -d ./infra -o json --output-file-path resultados.json\n\n# Rodar com soft-fail (n\xe3o falha mesmo com erro)\ncheckov -d ./infra --soft-fail\n\n# Criar baseline para ignorar achados repetidos\ncheckov -d ./infra --create-baseline\n\n# Usar baseline previamente salvo\ncheckov -d ./infra --baseline .checkov.baseline\n"})}),"\n",(0,n.jsx)(o.h2,{id:"exemplo-pr\xe1tico",children:"Exemplo pr\xe1tico"}),"\n",(0,n.jsxs)(o.h3,{id:"arquivo-maintf",children:["Arquivo ",(0,n.jsx)(o.code,{children:"main.tf"})]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-hcl",children:'resource "azurerm_storage_account" "exemplo" {\n  name                      = "storagemodule"\n  location                  = "eastus"\n  resource_group_name       = "meu-rg"\n  account_tier              = "Standard"\n  account_replication_type  = "LRS"\n  allow_blob_public_access  = true\n}\n'})}),"\n",(0,n.jsxs)(o.h3,{id:"resultado-esperado-com-checkov--f-maintf",children:["Resultado esperado com ",(0,n.jsx)(o.code,{children:"checkov -f main.tf"})]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:'Checkov v3.X.X\n\nmain.tf (terraform)\n====================\n\n\u274c CKV_AZURE_21: "Storage account should not allow public blob access"\n\tFAILED for resource azurerm_storage_account.exemplo\n\tFile: main.tf:1-8\n\tGuide: https://docs.bridgecrew.io/docs/azure_21-public-access-on-storage\n\nPassed checks: 5, Failed checks: 1\n'})}),"\n",(0,n.jsx)(o.h2,{id:"melhores-pr\xe1ticas",children:"Melhores pr\xe1ticas"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:["Use ",(0,n.jsx)(o.code,{children:"--baseline"})," para evitar alertas repetidos em builds"]}),"\n",(0,n.jsxs)(o.li,{children:["Combine ",(0,n.jsx)(o.code,{children:"--check"})," e ",(0,n.jsx)(o.code,{children:"--skip-check"})," para foco em riscos reais"]}),"\n",(0,n.jsx)(o.li,{children:"Rode o Checkov em todo commit (pre-commit ou CI/CD)"}),"\n",(0,n.jsxs)(o.li,{children:["Habilite logs detalhados com ",(0,n.jsx)(o.code,{children:"LOG_LEVEL=debug"})]}),"\n",(0,n.jsx)(o.li,{children:"Para Azure, priorize checks sobre criptografia, identidade e exposi\xe7\xe3o"}),"\n",(0,n.jsxs)(o.li,{children:["Documente exce\xe7\xf5es usando o ",(0,n.jsx)(o.code,{children:".checkov.baseline"})," com justificativas claras"]}),"\n"]}),"\n",(0,n.jsx)(o.h2,{id:"conclus\xe3o",children:"Conclus\xe3o"}),"\n",(0,n.jsx)(o.p,{children:"Com os comandos certos, o Checkov se torna uma ferramenta poderosa e simples para garantir a qualidade e conformidade da sua infraestrutura como c\xf3digo. Aproveite os exemplos acima para aplicar em seu projeto e incorporar no seu fluxo de trabalho."})]})}function m(e={}){const{wrapper:o}={...(0,c.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,o,a)=>{a.d(o,{R:()=>s,x:()=>i});var r=a(6540);const n={},c=r.createContext(n);function s(e){const o=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),r.createElement(c.Provider,{value:o},e.children)}}}]);