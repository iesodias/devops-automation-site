"use strict";(globalThis.webpackChunkdevops_automation_site=globalThis.webpackChunkdevops_automation_site||[]).push([[3420],{7627:(r,e,a)=>{a.r(e),a.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>t,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"lab-7-tfvars","title":"Lab 7 - Criando uma Storage Account no Azure com uso de .tfvars","description":"Introdu\xe7\xe3o","source":"@site/curso-terraform-udemy/25-lab-tfvars.md","sourceDirName":".","slug":"/lab-7-tfvars","permalink":"/udemy/terraform-automacao/lab-7-tfvars","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":25,"frontMatter":{"id":"lab-7-tfvars","title":"Lab 7 - Criando uma Storage Account no Azure com uso de .tfvars","noindex":true},"sidebar":"tutorialSidebar","previous":{"title":"Lab 6 - Criando uma M\xe1quina Virtual no Azure com uso de bloco `data`","permalink":"/udemy/terraform-automacao/lab-6-data"},"next":{"title":"Lab 8 - Criando uma Storage Account no Azure usando Terraform Workspaces","permalink":"/udemy/terraform-automacao/lab-8-ws"}}');var n=a(4848),s=a(8453);const t={id:"lab-7-tfvars",title:"Lab 7 - Criando uma Storage Account no Azure com uso de .tfvars",noindex:!0},i="Lab: Criando uma Storage Account no Azure com uso de .tfvars",c={},u=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"Pr\xe9-requisitos",id:"pr\xe9-requisitos",level:2},{value:"Etapas Iniciais",id:"etapas-iniciais",level:2},{value:"Arquivo: provider.tf",id:"arquivo-providertf",level:2},{value:"Arquivo: variables.tf",id:"arquivo-variablestf",level:2},{value:"Arquivo: terraform.tfvars",id:"arquivo-terraformtfvars",level:2},{value:"Arquivo: main.tf",id:"arquivo-maintf",level:2},{value:"Arquivo: outputs.tf",id:"arquivo-outputstf",level:2},{value:"Comandos Terraform",id:"comandos-terraform",level:2},{value:"Resultado Esperado",id:"resultado-esperado",level:2},{value:"Dicas e Boas Pr\xe1ticas",id:"dicas-e-boas-pr\xe1ticas",level:2}];function l(r){const e={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.header,{children:(0,n.jsx)(e.h1,{id:"lab-criando-uma-storage-account-no-azure-com-uso-de-tfvars",children:"Lab: Criando uma Storage Account no Azure com uso de .tfvars"})}),"\n",(0,n.jsx)(e.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,n.jsxs)(e.p,{children:["Neste laborat\xf3rio, vamos criar uma Storage Account no Azure usando Terraform 1.12.2, com separa\xe7\xe3o de arquivos e defini\xe7\xe3o de vari\xe1veis via um \xfanico arquivo ",(0,n.jsx)(e.code,{children:".tfvars"}),". Essa abordagem \xe9 \xfatil quando estamos lidando com apenas um ambiente, como um cen\xe1rio de teste ou desenvolvimento local."]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-bash",children:'export ARM_SUBSCRIPTION_ID="subscription_id"\n'})}),"\n",(0,n.jsx)(e.h2,{id:"pr\xe9-requisitos",children:"Pr\xe9-requisitos"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"Terraform 1.12.2 instalado"}),"\n",(0,n.jsxs)(e.li,{children:["Conta Azure autenticada com ",(0,n.jsx)(e.code,{children:"az login"})]}),"\n"]}),"\n",(0,n.jsx)(e.h2,{id:"etapas-iniciais",children:"Etapas Iniciais"}),"\n",(0,n.jsxs)(e.ol,{children:["\n",(0,n.jsx)(e.li,{children:"Crie a estrutura de diret\xf3rios e arquivos:"}),"\n"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-bash",children:"mkdir lab-storage-tfvars && cd lab-storage-tfvars\n\ntouch main.tf variables.tf outputs.tf provider.tf terraform.tfvars\n"})}),"\n",(0,n.jsxs)(e.ol,{start:"2",children:["\n",(0,n.jsx)(e.li,{children:"Verifique a estrutura com:"}),"\n"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-bash",children:"tree\n"})}),"\n",(0,n.jsx)(e.p,{children:"Sa\xedda esperada:"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{children:"lab-storage-tfvars/\n\u251c\u2500\u2500 main.tf\n\u251c\u2500\u2500 outputs.tf\n\u251c\u2500\u2500 provider.tf\n\u251c\u2500\u2500 variables.tf\n\u2514\u2500\u2500 terraform.tfvars\n"})}),"\n",(0,n.jsx)(e.h2,{id:"arquivo-providertf",children:"Arquivo: provider.tf"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-terraform",children:'provider "azurerm" {\n  features {}\n}\n'})}),"\n",(0,n.jsx)(e.h2,{id:"arquivo-variablestf",children:"Arquivo: variables.tf"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-terraform",children:'variable "location" {\n  description = "Localiza\xe7\xe3o dos recursos"\n  type        = string\n}\n\nvariable "resource_group_name" {\n  description = "Nome do Resource Group"\n  type        = string\n}\n\nvariable "storage_account_name" {\n  description = "Nome da Storage Account"\n  type        = string\n}\n'})}),"\n",(0,n.jsx)(e.h2,{id:"arquivo-terraformtfvars",children:"Arquivo: terraform.tfvars"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-hcl",children:'location             = "eastus"\nresource_group_name  = "tfvars-storage-rg"\nstorage_account_name = "tfvarsstorage123"\n'})}),"\n",(0,n.jsx)(e.h2,{id:"arquivo-maintf",children:"Arquivo: main.tf"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-terraform",children:'resource "azurerm_resource_group" "rg" {\n  name     = var.resource_group_name\n  location = var.location\n}\n\nresource "azurerm_storage_account" "storage" {\n  name                     = var.storage_account_name\n  resource_group_name      = azurerm_resource_group.rg.name\n  location                 = azurerm_resource_group.rg.location\n  account_tier             = "Standard"\n  account_replication_type = "LRS"\n}\n'})}),"\n",(0,n.jsx)(e.h2,{id:"arquivo-outputstf",children:"Arquivo: outputs.tf"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-terraform",children:'output "storage_account_name" {\n  value = azurerm_storage_account.storage.name\n}\n\noutput "resource_group_name" {\n  value = azurerm_resource_group.rg.name\n}\n\noutput "location" {\n  value = azurerm_storage_account.storage.location\n}\n'})}),"\n",(0,n.jsx)(e.h2,{id:"comandos-terraform",children:"Comandos Terraform"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-bash",children:'terraform init\nterraform plan -var-file="terraform.tfvars"\nterraform apply -var-file="terraform.tfvars"\n'})}),"\n",(0,n.jsx)(e.h2,{id:"resultado-esperado",children:"Resultado Esperado"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Um Resource Group e uma Storage Account criados com os valores definidos no ",(0,n.jsx)(e.code,{children:"terraform.tfvars"})]}),"\n",(0,n.jsx)(e.li,{children:"Outputs mostrando nome da storage, RG e localiza\xe7\xe3o"}),"\n"]}),"\n",(0,n.jsx)(e.h2,{id:"dicas-e-boas-pr\xe1ticas",children:"Dicas e Boas Pr\xe1ticas"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Nunca comite arquivos ",(0,n.jsx)(e.code,{children:".tfvars"})," com dados sens\xedveis"]}),"\n",(0,n.jsx)(e.li,{children:"Separe l\xf3gica (infraestrutura) de configura\xe7\xe3o (valores)"}),"\n",(0,n.jsxs)(e.li,{children:["Use arquivos ",(0,n.jsx)(e.code,{children:".tfvars"})," para facilitar execu\xe7\xe3o com diferentes par\xe2metros"]}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsx)(e.p,{children:"Este lab \xe9 ideal para testar configura\xe7\xf5es \xfanicas com o Terraform, mantendo uma estrutura clara, reutiliz\xe1vel e separada por arquivos."})]})}function d(r={}){const{wrapper:e}={...(0,s.R)(),...r.components};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(l,{...r})}):l(r)}},8453:(r,e,a)=>{a.d(e,{R:()=>t,x:()=>i});var o=a(6540);const n={},s=o.createContext(n);function t(r){const e=o.useContext(s);return o.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function i(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(n):r.components||n:t(r.components),o.createElement(s.Provider,{value:e},r.children)}}}]);