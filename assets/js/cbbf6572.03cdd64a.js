"use strict";(globalThis.webpackChunkdevops_automation_site=globalThis.webpackChunkdevops_automation_site||[]).push([[324],{7183:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>n,toc:()=>t});const n=JSON.parse('{"id":"tfvars","title":"Aula 8 - Arquivos .tfvars no Terraform","description":"Introdu\xe7\xe3o","source":"@site/curso-terraform-udemy/15-tfvars.md","sourceDirName":".","slug":"/tfvars","permalink":"/udemy/terraform-automacao/tfvars","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"id":"tfvars","title":"Aula 8 - Arquivos .tfvars no Terraform","noindex":true},"sidebar":"tutorialSidebar","previous":{"title":"Aula 8 - Bloco data no Terraform","permalink":"/udemy/terraform-automacao/data-block"},"next":{"title":"Aula 9 - Workspaces no Terraform","permalink":"/udemy/terraform-automacao/workspaces"}}');var s=a(4848),o=a(8453);const i={id:"tfvars",title:"Aula 8 - Arquivos .tfvars no Terraform",noindex:!0},l="Arquivos .tfvars no Terraform",d={},t=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"O que \xe9 <code>.tfvars</code>",id:"o-que-\xe9-tfvars",level:2},{value:"Explica\xe7\xe3o t\xe9cnica",id:"explica\xe7\xe3o-t\xe9cnica",level:2},{value:"<code>dev.tfvars</code>",id:"devtfvars",level:3},{value:"<code>hml.tfvars</code>",id:"hmltfvars",level:3},{value:"<code>prod.tfvars</code>",id:"prodtfvars",level:3},{value:"Comandos",id:"comandos",level:2},{value:"Exemplo pr\xe1tico",id:"exemplo-pr\xe1tico",level:2},{value:"Estrutura de arquivos:",id:"estrutura-de-arquivos",level:3},{value:"<code>variables.tf</code>",id:"variablestf",level:3},{value:"<code>main.tf</code>",id:"maintf",level:3},{value:"Output esperado",id:"output-esperado",level:2},{value:"Melhores pr\xe1ticas",id:"melhores-pr\xe1ticas",level:2}];function c(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsxs)(r.h1,{id:"arquivos-tfvars-no-terraform",children:["Arquivos ",(0,s.jsx)(r.code,{children:".tfvars"})," no Terraform"]})}),"\n",(0,s.jsx)(r.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,s.jsxs)(r.p,{children:["No Terraform, uma pr\xe1tica essencial \xe9 separar a ",(0,s.jsx)(r.strong,{children:"defini\xe7\xe3o da infraestrutura"})," dos ",(0,s.jsx)(r.strong,{children:"valores das vari\xe1veis"}),". Isso \xe9 feito com os arquivos ",(0,s.jsx)(r.code,{children:".tfvars"}),", que permitem passar valores externos ao c\xf3digo principal. Essa abordagem \xe9 ideal para lidar com diferentes ambientes como desenvolvimento, homologacao e produ\xe7\xe3o."]}),"\n",(0,s.jsxs)(r.h2,{id:"o-que-\xe9-tfvars",children:["O que \xe9 ",(0,s.jsx)(r.code,{children:".tfvars"})]}),"\n",(0,s.jsxs)(r.p,{children:["Arquivos ",(0,s.jsx)(r.code,{children:".tfvars"})," s\xe3o arquivos onde voc\xea define valores para vari\xe1veis que foram declaradas nos arquivos ",(0,s.jsx)(r.code,{children:".tf"}),". Eles s\xe3o usados para:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Separar configura\xe7\xf5es espec\xedficas por ambiente"}),"\n",(0,s.jsx)(r.li,{children:"Reutilizar o mesmo c\xf3digo com diferentes valores"}),"\n",(0,s.jsx)(r.li,{children:"Evitar hardcode no c\xf3digo principal"}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"explica\xe7\xe3o-t\xe9cnica",children:"Explica\xe7\xe3o t\xe9cnica"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["Voc\xea declara as vari\xe1veis no arquivo principal (",(0,s.jsx)(r.code,{children:"variables.tf"}),", por exemplo):"]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-hcl",children:'variable "location" {\n  type    = string\n  default = "eastus"\n}\n\nvariable "vm_size" {\n  type = string\n}\n'})}),"\n",(0,s.jsxs)(r.ol,{start:"2",children:["\n",(0,s.jsxs)(r.li,{children:["Cria arquivos ",(0,s.jsx)(r.code,{children:".tfvars"})," para cada ambiente:"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"devtfvars",children:(0,s.jsx)(r.code,{children:"dev.tfvars"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-hcl",children:'location = "eastus"\nvm_size  = "Standard_B1s"\n'})}),"\n",(0,s.jsx)(r.h3,{id:"hmltfvars",children:(0,s.jsx)(r.code,{children:"hml.tfvars"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-hcl",children:'location = "centralus"\nvm_size  = "Standard_B2s"\n'})}),"\n",(0,s.jsx)(r.h3,{id:"prodtfvars",children:(0,s.jsx)(r.code,{children:"prod.tfvars"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-hcl",children:'location = "westeurope"\nvm_size  = "Standard_D2s_v3"\n'})}),"\n",(0,s.jsxs)(r.ol,{start:"3",children:["\n",(0,s.jsx)(r.li,{children:"Aplica usando:"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'terraform apply -var-file="dev.tfvars"\nterraform apply -var-file="hml.tfvars"\nterraform apply -var-file="prod.tfvars"\n'})}),"\n",(0,s.jsx)(r.h2,{id:"comandos",children:"Comandos"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'terraform init\nterraform plan -var-file="dev.tfvars"\nterraform apply -var-file="dev.tfvars"\n'})}),"\n",(0,s.jsx)(r.h2,{id:"exemplo-pr\xe1tico",children:"Exemplo pr\xe1tico"}),"\n",(0,s.jsx)(r.h3,{id:"estrutura-de-arquivos",children:"Estrutura de arquivos:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"main.tf\nvariables.tf\ndev.tfvars\nhml.tfvars\nprod.tfvars\n"})}),"\n",(0,s.jsx)(r.h3,{id:"variablestf",children:(0,s.jsx)(r.code,{children:"variables.tf"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-hcl",children:'variable "location" {}\nvariable "vm_size" {}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"maintf",children:(0,s.jsx)(r.code,{children:"main.tf"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-hcl",children:'provider "azurerm" {\n  features {}\n}\n\nresource "azurerm_resource_group" "rg" {\n  name     = "rg-exemplo"\n  location = var.location\n}\n\nresource "azurerm_linux_virtual_machine" "vm" {\n  name                = "vm-exemplo"\n  resource_group_name = azurerm_resource_group.rg.name\n  location            = var.location\n  size                = var.vm_size\n  admin_username      = "azureuser"\n  network_interface_ids = ["/subscriptions/xxx/.../nic"]\n\n  os_disk {\n    caching              = "ReadWrite"\n    storage_account_type = "Standard_LRS"\n    name                 = "osdisk"\n  }\n\n  source_image_reference {\n    publisher = "Canonical"\n    offer     = "UbuntuServer"\n    sku       = "22_04-lts"\n    version   = "latest"\n  }\n\n  admin_ssh_key {\n    username   = "azureuser"\n    public_key = file("~/.ssh/id_rsa.pub")\n  }\n\n  disable_password_authentication = true\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"output-esperado",children:"Output esperado"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'Apply complete! Resources: 2 added, 0 changed, 0 destroyed.\n\nOutputs:\nazurerm_linux_virtual_machine.vm:\n  name     = "vm-exemplo"\n  location = "eastus"\n  size     = "Standard_B1s"\n'})}),"\n",(0,s.jsx)(r.h2,{id:"melhores-pr\xe1ticas",children:"Melhores pr\xe1ticas"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Nunca comite arquivos ",(0,s.jsx)(r.code,{children:".tfvars"})," com dados sens\xedveis no Git"]}),"\n",(0,s.jsxs)(r.li,{children:["Use nomes claros como ",(0,s.jsx)(r.code,{children:"dev.tfvars"}),", ",(0,s.jsx)(r.code,{children:"hml.tfvars"}),", ",(0,s.jsx)(r.code,{children:"prod.tfvars"})]}),"\n",(0,s.jsx)(r.li,{children:"Separe l\xf3gicas do c\xf3digo e valores com o uso de vari\xe1veis"}),"\n",(0,s.jsx)(r.li,{children:"Automatize a sele\xe7\xe3o do ambiente nos pipelines"}),"\n",(0,s.jsxs)(r.li,{children:["Use ",(0,s.jsx)(r.code,{children:"default"})," apenas para valores comuns ou seguran\xe7a"]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["Arquivos ",(0,s.jsx)(r.code,{children:".tfvars"})," tornam seu c\xf3digo mais flex\xedvel e adapt\xe1vel a diferentes contextos, facilitando o uso profissional do Terraform."]})]})}function u(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,r,a)=>{a.d(r,{R:()=>i,x:()=>l});var n=a(6540);const s={},o=n.createContext(s);function i(e){const r=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(o.Provider,{value:r},e.children)}}}]);