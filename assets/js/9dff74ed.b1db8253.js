"use strict";(self.webpackChunkdevops_automation_site=self.webpackChunkdevops_automation_site||[]).push([[9674],{6561:(e,r,o)=>{o.r(r),o.d(r,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"trivy-teorico","title":"Aula 11 - Introdu\xe7\xe3o ao Shift Left Security e SAST com Terraform","description":"Introdu\xe7\xe3o","source":"@site/curso-terraform-udemy/19-trivy-sast-shift-left.md","sourceDirName":".","slug":"/trivy-teorico","permalink":"/udemy/terraform-automacao/trivy-teorico","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":19,"frontMatter":{"id":"trivy-teorico","title":"Aula 11 - Introdu\xe7\xe3o ao Shift Left Security e SAST com Terraform","noindex":true},"sidebar":"tutorialSidebar","previous":{"title":"Lab 9 - Criando uma Storage Account no Azure com uso de `locals`","permalink":"/udemy/terraform-automacao/lab-9-locals"},"next":{"title":"Aula 12 - Usando o Trivy com Terraform","permalink":"/udemy/terraform-automacao/trivy-teorico-1"}}');var i=o(4848),n=o(8453);const t={id:"trivy-teorico",title:"Aula 11 - Introdu\xe7\xe3o ao Shift Left Security e SAST com Terraform",noindex:!0},s="Introdu\xe7\xe3o ao Shift Left Security e SAST com Terraform",c={},d=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"O que \xe9 Shift Left Security e SAST",id:"o-que-\xe9-shift-left-security-e-sast",level:2},{value:"Explica\xe7\xe3o t\xe9cnica",id:"explica\xe7\xe3o-t\xe9cnica",level:2},{value:"Comando b\xe1sico com Trivy (SAST para Terraform)",id:"comando-b\xe1sico-com-trivy-sast-para-terraform",level:2},{value:"Exemplo pr\xe1tico",id:"exemplo-pr\xe1tico",level:2},{value:"Diret\xf3rio <code>infra/</code> com <code>main.tf</code> contendo:",id:"diret\xf3rio-infra-com-maintf-contendo",level:3},{value:"Resultado do SAST com Trivy:",id:"resultado-do-sast-com-trivy",level:3},{value:"Output esperado",id:"output-esperado",level:2},{value:"Melhores pr\xe1ticas",id:"melhores-pr\xe1ticas",level:2},{value:"Conclus\xe3o",id:"conclus\xe3o",level:2}];function l(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"introdu\xe7\xe3o-ao-shift-left-security-e-sast-com-terraform",children:"Introdu\xe7\xe3o ao Shift Left Security e SAST com Terraform"})}),"\n",(0,i.jsx)(r.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,i.jsxs)(r.p,{children:["No desenvolvimento moderno, especialmente com infraestrutura como c\xf3digo (IaC), a seguran\xe7a n\xe3o pode ser tratada apenas no final do processo. Surge ent\xe3o o conceito de ",(0,i.jsx)(r.strong,{children:"Shift Left Security"}),", que prop\xf5e mover as valida\xe7\xf5es de seguran\xe7a para o in\xedcio do ciclo de desenvolvimento."]}),"\n",(0,i.jsxs)(r.p,{children:["Junto a essa abordagem, entra o uso de ",(0,i.jsx)(r.strong,{children:"SAST"})," (Static Application Security Testing), uma t\xe9cnica que analisa o c\xf3digo estaticamente, buscando falhas e vulnerabilidades antes mesmo da execu\xe7\xe3o."]}),"\n",(0,i.jsx)(r.h2,{id:"o-que-\xe9-shift-left-security-e-sast",children:"O que \xe9 Shift Left Security e SAST"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Shift Left Security"}),": Estrat\xe9gia que antecipa as checagens de seguran\xe7a para as fases iniciais da entrega."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"SAST"}),": Tipo de an\xe1lise de c\xf3digo que examina arquivos fonte (\xe9st\xe1ticos) em busca de vulnerabilidades ou configura\xe7\xf5es inseguras."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["Aplicado ao Terraform, isso significa escanear arquivos ",(0,i.jsx)(r.code,{children:".tf"})," automaticamente em pipelines ou durante o desenvolvimento para garantir que a infraestrutura esteja segura antes do ",(0,i.jsx)(r.code,{children:"terraform apply"}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"explica\xe7\xe3o-t\xe9cnica",children:"Explica\xe7\xe3o t\xe9cnica"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"A an\xe1lise SAST n\xe3o requer execu\xe7\xe3o de infraestrutura."}),"\n",(0,i.jsxs)(r.li,{children:["Ferramentas como ",(0,i.jsx)(r.strong,{children:"Trivy"})," (que substitui ",(0,i.jsx)(r.code,{children:"tfsec"}),") realizam SAST em IaC com regras baseadas em benchmarks de seguran\xe7a."]}),"\n",(0,i.jsx)(r.li,{children:"Avalia m\xe1s pr\xe1ticas como: falta de criptografia, uso de senhas em texto plano, portas abertas, configura\xe7\xf5es p\xfablicas sem controle, etc."}),"\n",(0,i.jsx)(r.li,{children:"Pode ser integrada em CI/CD e IDEs para feedback imediato."}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"comando-b\xe1sico-com-trivy-sast-para-terraform",children:"Comando b\xe1sico com Trivy (SAST para Terraform)"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Escanear configura\xe7\xe3o Terraform (Azure como exemplo)\ntrivy config ./infra --severity HIGH,CRITICAL\n"})}),"\n",(0,i.jsx)(r.h2,{id:"exemplo-pr\xe1tico",children:"Exemplo pr\xe1tico"}),"\n",(0,i.jsxs)(r.h3,{id:"diret\xf3rio-infra-com-maintf-contendo",children:["Diret\xf3rio ",(0,i.jsx)(r.code,{children:"infra/"})," com ",(0,i.jsx)(r.code,{children:"main.tf"})," contendo:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-hcl",children:'resource "azurerm_storage_account" "exemplo" {\n  name                     = "storagedev"\n  resource_group_name      = "meu-rg"\n  location                 = "eastus"\n  account_tier             = "Standard"\n  account_replication_type = "LRS"\n  enable_https_traffic_only = false\n}\n'})}),"\n",(0,i.jsx)(r.h3,{id:"resultado-do-sast-com-trivy",children:"Resultado do SAST com Trivy:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"main.tf:8\nCRITICAL: HTTPS should be enforced for storage accounts [AZU014]\n"})}),"\n",(0,i.jsx)(r.p,{children:"Esse tipo de erro pode ser corrigido ajustando a linha:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-hcl",children:"enable_https_traffic_only = true\n"})}),"\n",(0,i.jsx)(r.h2,{id:"output-esperado",children:"Output esperado"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Nome do arquivo analisado"}),"\n",(0,i.jsx)(r.li,{children:"Linha do problema"}),"\n",(0,i.jsx)(r.li,{children:"Severidade (LOW, MEDIUM, HIGH, CRITICAL)"}),"\n",(0,i.jsx)(r.li,{children:"C\xf3digo da regra e descri\xe7\xe3o da falha"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"melhores-pr\xe1ticas",children:"Melhores pr\xe1ticas"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Sempre inclua uma etapa de ",(0,i.jsx)(r.code,{children:"trivy config"})," no CI/CD"]}),"\n",(0,i.jsx)(r.li,{children:"Use SAST desde o ambiente de desenvolvimento (ex: pre-commit, extens\xf5es de editor)"}),"\n",(0,i.jsx)(r.li,{children:"Priorize corre\xe7\xf5es por severidade"}),"\n",(0,i.jsx)(r.li,{children:"Documente falhas conhecidas com justificativas se n\xe3o puderem ser corrigidas imediatamente"}),"\n",(0,i.jsxs)(r.li,{children:["Combine com valida\xe7\xe3o de sintaxe (",(0,i.jsx)(r.code,{children:"terraform validate"}),") e linting"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"conclus\xe3o",children:"Conclus\xe3o"}),"\n",(0,i.jsx)(r.p,{children:"Aplicar SAST em Terraform com ferramentas como Trivy \xe9 essencial para garantir que sua infraestrutura seja segura desde o in\xedcio. O Shift Left Security promove agilidade sem abrir m\xe3o da seguran\xe7a, reduzindo custos e prevenindo riscos antes mesmo do deploy."})]})}function u(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,r,o)=>{o.d(r,{R:()=>t,x:()=>s});var a=o(6540);const i={},n=a.createContext(i);function t(e){const r=a.useContext(n);return a.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),a.createElement(n.Provider,{value:r},e.children)}}}]);