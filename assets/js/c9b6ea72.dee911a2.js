"use strict";(self.webpackChunkdevops_automation_site=self.webpackChunkdevops_automation_site||[]).push([[1558],{7134:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>t});const o=JSON.parse('{"id":"modulo-03-Criando-workflow/yaml","title":"YAML B\xe1sico para Workflows","description":"Introdu\xe7\xe3o","source":"@site/curso-github-actions-udemy/modulo-03-Criando-workflow/02-YAML-Basico.md","sourceDirName":"modulo-03-Criando-workflow","slug":"/modulo-03-Criando-workflow/yaml","permalink":"/udemy/github-actions-automacao/modulo-03-Criando-workflow/yaml","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"yaml","title":"YAML B\xe1sico para Workflows"},"sidebar":"tutorialSidebar","previous":{"title":"Estrutura de Diret\xf3rios e Arquivos","permalink":"/udemy/github-actions-automacao/modulo-03-Criando-workflow/estrutura"},"next":{"title":"Eventos de Trigger no GitHub Actions","permalink":"/udemy/github-actions-automacao/modulo-03-Criando-workflow/triggers"}}');var i=s(4848),r=s(8453);const a={id:"yaml",title:"YAML B\xe1sico para Workflows"},l="YAML B\xe1sico para Workflows",d={},t=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"Defini\xe7\xe3o",id:"defini\xe7\xe3o",level:2},{value:"Explica\xe7\xe3o T\xe9cnica",id:"explica\xe7\xe3o-t\xe9cnica",level:2},{value:"Estrutura Geral de um Workflow",id:"estrutura-geral-de-um-workflow",level:3},{value:"Indenta\xe7\xe3o",id:"indenta\xe7\xe3o",level:3},{value:"Chaves e Valores",id:"chaves-e-valores",level:3},{value:"Listas",id:"listas",level:3},{value:"Mapeamentos Aninhados",id:"mapeamentos-aninhados",level:3},{value:"Coment\xe1rios",id:"coment\xe1rios",level:3},{value:"Blocos de Texto Multilinha",id:"blocos-de-texto-multilinha",level:3},{value:"Express\xf5es em GitHub Actions",id:"express\xf5es-em-github-actions",level:3},{value:"Vari\xe1veis de Ambiente (<code>env</code>)",id:"vari\xe1veis-de-ambiente-env",level:3},{value:"Estrutura de <code>jobs</code>",id:"estrutura-de-jobs",level:3},{value:"Estrutura de <code>steps</code>",id:"estrutura-de-steps",level:3},{value:"Erros Frequentes",id:"erros-frequentes",level:3},{value:"Valida\xe7\xe3o R\xe1pida",id:"valida\xe7\xe3o-r\xe1pida",level:3},{value:"Exemplo Pr\xe1tico",id:"exemplo-pr\xe1tico",level:2},{value:"Conclus\xe3o",id:"conclus\xe3o",level:2}];function c(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"yaml-b\xe1sico-para-workflows",children:"YAML B\xe1sico para Workflows"})}),"\n",(0,i.jsx)(n.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,i.jsxs)(n.p,{children:["Antes de combinar eventos, jobs e steps, \xe9 essencial compreender a sintaxe YAML, j\xe1 que cada workflow do GitHub Actions \xe9 um arquivo ",(0,i.jsx)(n.code,{children:".yml"})," ou ",(0,i.jsx)(n.code,{children:".yaml"}),". Erros simples de indenta\xe7\xe3o ou estrutura s\xe3o causas frequentes de falhas silenciosas, interpreta\xe7\xf5es incorretas ou execu\xe7\xe3o parcial. Esta aula apresenta os fundamentos necess\xe1rios para ler, escrever e validar workflows de forma segura e previs\xedvel."]}),"\n",(0,i.jsx)(n.h2,{id:"defini\xe7\xe3o",children:"Defini\xe7\xe3o"}),"\n",(0,i.jsxs)(n.p,{children:["YAML (YAML Ain't Markup Language) \xe9 um formato de serializa\xe7\xe3o de dados leg\xedvel por humanos usado para representar pares chave\u2013valor, listas e estruturas hier\xe1rquicas atrav\xe9s de indenta\xe7\xe3o. No contexto de GitHub Actions, define a declara\xe7\xe3o do workflow: disparadores (",(0,i.jsx)(n.code,{children:"on"}),"), agrupamentos de execu\xe7\xe3o (",(0,i.jsx)(n.code,{children:"jobs"}),") e unidades de a\xe7\xe3o (",(0,i.jsx)(n.code,{children:"steps"}),")."]}),"\n",(0,i.jsx)(n.h2,{id:"explica\xe7\xe3o-t\xe9cnica",children:"Explica\xe7\xe3o T\xe9cnica"}),"\n",(0,i.jsx)(n.h3,{id:"estrutura-geral-de-um-workflow",children:"Estrutura Geral de um Workflow"}),"\n",(0,i.jsx)(n.p,{children:"Componentes de alto n\xedvel (ordem t\xedpica):"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"})," (opcional) \u2013 r\xf3tulo exibido na interface."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"on"})," (obrigat\xf3rio) \u2013 eventos que disparam a execu\xe7\xe3o."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"permissions"})," (opcional) \u2013 ajustes de escopo do ",(0,i.jsx)(n.code,{children:"GITHUB_TOKEN"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"env"})," (opcional) \u2013 vari\xe1veis de ambiente globais."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"jobs"})," (obrigat\xf3rio) \u2013 conjunto de jobs, cada um com seu bloco interno."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"indenta\xe7\xe3o",children:"Indenta\xe7\xe3o"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Usa ESPA\xc7OS (nunca tabs). Recomenda-se 2 espa\xe7os por n\xedvel."}),"\n",(0,i.jsx)(n.li,{children:"O n\xedvel de indenta\xe7\xe3o define hierarquia. Um item mal indentado altera o significado ou gera erro de parsing."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Exemplo incorreto (indenta\xe7\xe3o inconsistente):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"jobs:\n build:\n    runs-on: ubuntu-latest\n"})}),"\n",(0,i.jsx)(n.p,{children:"Corre\xe7\xe3o:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"jobs:\n  build:\n    runs-on: ubuntu-latest\n"})}),"\n",(0,i.jsx)(n.h3,{id:"chaves-e-valores",children:"Chaves e Valores"}),"\n",(0,i.jsxs)(n.p,{children:["Formato simples ",(0,i.jsx)(n.code,{children:"chave: valor"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"name: CI\nruns-on: ubuntu-latest\n"})}),"\n",(0,i.jsx)(n.p,{children:"Strings podem ser:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["N\xe3o citadas: ",(0,i.jsx)(n.code,{children:"name: CI"})]}),"\n",(0,i.jsxs)(n.li,{children:["Com aspas duplas (permitem interpola\xe7\xe3o de escape): ",(0,i.jsx)(n.code,{children:'name: "Meu Workflow"'})]}),"\n",(0,i.jsxs)(n.li,{children:["Com aspas simples (mant\xeam literal): ",(0,i.jsx)(n.code,{children:"name: 'Texto literal: ${{ nao_expande }}'"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"listas",children:"Listas"}),"\n",(0,i.jsx)(n.p,{children:"Duas formas equivalentes:\nInline:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"branches: [ main, develop ]\n"})}),"\n",(0,i.jsx)(n.p,{children:"Multilinha:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"branches:\n  - main\n  - develop\n"})}),"\n",(0,i.jsx)(n.p,{children:"A escolha \xe9 estil\xedstica; usar multilinha para listas maiores ou mais expl\xedcitas."}),"\n",(0,i.jsx)(n.h3,{id:"mapeamentos-aninhados",children:"Mapeamentos Aninhados"}),"\n",(0,i.jsx)(n.p,{children:"Estruturas chave\u2013valor dentro de outros blocos:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"on:\n  push:\n    branches:\n      - main\n  pull_request:\n    branches:\n      - main\n"})}),"\n",(0,i.jsx)(n.h3,{id:"coment\xe1rios",children:"Coment\xe1rios"}),"\n",(0,i.jsxs)(n.p,{children:["Usar ",(0,i.jsx)(n.code,{children:"#"})," em qualquer ponto da linha (exceto dentro de strings literais):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# Nome vis\xedvel no GitHub\nname: CI\n"})}),"\n",(0,i.jsx)(n.h3,{id:"blocos-de-texto-multilinha",children:"Blocos de Texto Multilinha"}),"\n",(0,i.jsxs)(n.p,{children:["Usar ",(0,i.jsx)(n.code,{children:"|"})," para preservar quebras; ",(0,i.jsx)(n.code,{children:">"})," para dobrar (unir em espa\xe7o simples):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'run: |\n  echo "Linha 1"\n  echo "Linha 2"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"express\xf5es-em-github-actions",children:"Express\xf5es em GitHub Actions"}),"\n",(0,i.jsxs)(n.p,{children:["Estruturas como ",(0,i.jsx)(n.code,{children:"${{ github.repository }}"})," n\xe3o s\xe3o do YAML em si; s\xe3o avaliadas pelo motor de express\xe3o do GitHub ap\xf3s o parsing YAML. Devem permanecer literais dentro do arquivo."]}),"\n",(0,i.jsxs)(n.h3,{id:"vari\xe1veis-de-ambiente-env",children:["Vari\xe1veis de Ambiente (",(0,i.jsx)(n.code,{children:"env"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Podem ser definidas em tr\xeas n\xedveis:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"env:\n  NODE_VERSION: '18'\n\njobs:\n  build:\n    env:\n      APP_MODE: test\n    steps:\n      - name: Exemplo\n        env:\n          LOCAL_FLAG: enabled\n        run: echo \"${{ env.APP_MODE }} / $LOCAL_FLAG\"\n"})}),"\n",(0,i.jsx)(n.p,{children:"Resolu\xe7\xe3o: step > job > workflow."}),"\n",(0,i.jsxs)(n.h3,{id:"estrutura-de-jobs",children:["Estrutura de ",(0,i.jsx)(n.code,{children:"jobs"})]}),"\n",(0,i.jsxs)(n.p,{children:["Cada job tem obrigatoriamente ",(0,i.jsx)(n.code,{children:"runs-on"})," e opcionalmente ",(0,i.jsx)(n.code,{children:"needs"}),", ",(0,i.jsx)(n.code,{children:"strategy"}),", ",(0,i.jsx)(n.code,{children:"env"}),", ",(0,i.jsx)(n.code,{children:"steps"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"jobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Instalar depend\xeancias\n        run: npm ci\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"estrutura-de-steps",children:["Estrutura de ",(0,i.jsx)(n.code,{children:"steps"})]}),"\n",(0,i.jsxs)(n.p,{children:["Cada step \xe9 um item de lista sob ",(0,i.jsx)(n.code,{children:"steps:"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"uses:"})," referencia uma action reutiliz\xe1vel."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"run:"})," executa comandos na shell do runner."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name:"})," r\xf3tulo exibido."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"if:"})," condi\xe7\xe3o booleana opcional."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Exemplo com ambos:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"steps:\n  - name: Obter c\xf3digo\n    uses: actions/checkout@v4\n  - name: Testes\n    run: npm test\n  - name: Condicional\n    if: github.event_name == 'pull_request'\n    run: echo \"Rodando apenas em PR\"\n"})}),"\n",(0,i.jsx)(n.h3,{id:"erros-frequentes",children:"Erros Frequentes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Misturar tabs e espa\xe7os \u2192 falha de parsing."}),"\n",(0,i.jsxs)(n.li,{children:["Esquecer ",(0,i.jsx)(n.code,{children:":"})," ap\xf3s chave."]}),"\n",(0,i.jsx)(n.li,{children:"Indentar listas com n\xedvel errado."}),"\n",(0,i.jsx)(n.li,{children:"Duplicar chave no mesmo bloco (\xfaltimo valor prevalece silenciosamente em alguns parsers, podendo quebrar l\xf3gica)."}),"\n",(0,i.jsxs)(n.li,{children:["Colocar express\xe3o ",(0,i.jsx)(n.code,{children:"${{ }}"})," dentro de aspas simples esperando interpola\xe7\xe3o (permanece literal)."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"valida\xe7\xe3o-r\xe1pida",children:"Valida\xe7\xe3o R\xe1pida"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Linters/editor com suporte YAML (extens\xf5es ajudam a detectar indenta\xe7\xe3o errada)."}),"\n",(0,i.jsxs)(n.li,{children:["Commit pequeno e observar parsing pela aba ",(0,i.jsx)(n.em,{children:"Actions"})," (erros de sintaxe abortam antes de iniciar jobs)."]}),"\n",(0,i.jsx)(n.li,{children:"Evitar altera\xe7\xf5es m\xfaltiplas n\xe3o relacionadas no mesmo workflow at\xe9 consolidar base."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"exemplo-pr\xe1tico",children:"Exemplo Pr\xe1tico"}),"\n",(0,i.jsx)(n.p,{children:"Workflow m\xednimo ilustrando conceitos de lista, mapeamento, vari\xe1veis e steps:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'name: Exemplo YAML B\xe1sico\non:\n  push:\n    branches: [ main ]\n\nenv:\n  APP_NAME: demo\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n      - name: Mostrar contexto\n        run: |\n          echo "Repo: ${{ github.repository }}"\n          echo "App: $APP_NAME"\n      - name: Executar somente em push\n        if: github.event_name == \'push\'\n        run: echo "Disparado por push"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"conclus\xe3o",children:"Conclus\xe3o"}),"\n",(0,i.jsxs)(n.p,{children:["Dominar YAML reduz atrito na constru\xe7\xe3o de workflows: indenta\xe7\xe3o consistente, uso correto de listas e mapeamentos e entendimento da separa\xe7\xe3o entre sintaxe YAML e avalia\xe7\xe3o de express\xf5es do GitHub evitam falhas recorrentes. Com esta base, adicionar camadas como m\xfaltiplos jobs, matrizes (",(0,i.jsx)(n.code,{children:"strategy.matrix"}),") e permiss\xf5es expl\xedcitas torna-se progress\xe3o natural e segura."]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var o=s(6540);const i={},r=o.createContext(i);function a(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);