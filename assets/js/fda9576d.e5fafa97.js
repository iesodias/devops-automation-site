"use strict";(self.webpackChunkdevops_automation_site=self.webpackChunkdevops_automation_site||[]).push([[3385],{1148:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"19-dados-sensiveis","title":"Lab 19 - Trabalhando com Dados Sens\xedveis no Terraform","description":"Introdu\xe7\xe3o","source":"@site/curso-terraform-udemy/37-dados-sensiveis.md","sourceDirName":".","slug":"/19-dados-sensiveis","permalink":"/udemy/terraform-automacao/19-dados-sensiveis","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":37,"frontMatter":{"id":"19-dados-sensiveis","title":"Lab 19 - Trabalhando com Dados Sens\xedveis no Terraform","noindex":true},"sidebar":"tutorialSidebar","previous":{"title":"Lab 18 - Criando uma M\xe1quina Virtual no Azure com M\xf3dulo Terraform","permalink":"/udemy/terraform-automacao/lab-18-modulos"},"next":{"title":"Lab 20 - Introdu\xe7\xe3o ao Azure Key Vault","permalink":"/udemy/terraform-automacao/20-intro-kevault"}}');var n=o(4848),a=o(8453);const i={id:"19-dados-sensiveis",title:"Lab 19 - Trabalhando com Dados Sens\xedveis no Terraform",noindex:!0},d="Trabalhando com Dados Sens\xedveis no Terraform",c={},t=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"O que s\xe3o dados sens\xedveis",id:"o-que-s\xe3o-dados-sens\xedveis",level:2},{value:"Explica\xe7\xe3o t\xe9cnica",id:"explica\xe7\xe3o-t\xe9cnica",level:2},{value:"Riscos e perigos",id:"riscos-e-perigos",level:2},{value:"Cen\xe1rios comuns de uso",id:"cen\xe1rios-comuns-de-uso",level:2},{value:"Conclus\xe3o",id:"conclus\xe3o",level:2}];function l(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"trabalhando-com-dados-sens\xedveis-no-terraform",children:"Trabalhando com Dados Sens\xedveis no Terraform"})}),"\n",(0,n.jsx)(s.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,n.jsx)(s.p,{children:"Quando usamos infraestrutura como c\xf3digo, muitas vezes precisamos lidar com informa\xe7\xf5es sens\xedveis como senhas, tokens de acesso, chaves de API, connection strings e certificados. Se essas informa\xe7\xf5es forem expostas, podem comprometer n\xe3o s\xf3 um ambiente de desenvolvimento, mas toda a opera\xe7\xe3o em produ\xe7\xe3o. Por isso, \xe9 fundamental compreender como o Terraform trata dados sens\xedveis e quais cuidados tomar."}),"\n",(0,n.jsx)(s.h2,{id:"o-que-s\xe3o-dados-sens\xedveis",children:"O que s\xe3o dados sens\xedveis"}),"\n",(0,n.jsx)(s.p,{children:"Dados sens\xedveis s\xe3o informa\xe7\xf5es que devem ser protegidas contra acesso n\xe3o autorizado. Em contextos de infraestrutura, isso inclui:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Senhas de VMs ou banco de dados"}),"\n",(0,n.jsx)(s.li,{children:"Chaves de API para acesso a servi\xe7os"}),"\n",(0,n.jsx)(s.li,{children:"Tokens de autentica\xe7\xe3o para pipelines"}),"\n",(0,n.jsx)(s.li,{children:"Strings de conex\xe3o com bancos de dados ou storage"}),"\n",(0,n.jsx)(s.li,{children:"Certificados e chaves privadas"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Esses dados, se vazados, podem ser usados para acessar ambientes internos, causar interrup\xe7\xf5es ou at\xe9 mesmo ataques com perda de dados."}),"\n",(0,n.jsx)(s.h2,{id:"explica\xe7\xe3o-t\xe9cnica",children:"Explica\xe7\xe3o t\xe9cnica"}),"\n",(0,n.jsx)(s.p,{children:"O Terraform trata dados sens\xedveis de maneira especial, mas \xe9 o desenvolvedor que precisa aplicar boas pr\xe1ticas para garantir seguran\xe7a total. Alguns pontos importantes:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Vari\xe1veis podem conter valores sens\xedveis"}),". Por padr\xe3o, o Terraform n\xe3o sabe se um valor \xe9 sens\xedvel ou n\xe3o \u2014 voc\xea precisa marcar vari\xe1veis como ",(0,n.jsx)(s.code,{children:"sensitive = true"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsxs)(s.strong,{children:["Arquivos de estado (",(0,n.jsx)(s.code,{children:"terraform.tfstate"}),") armazenam valores reais"]})," de vari\xe1veis, incluindo segredos. Esses arquivos devem ser protegidos e nunca versionados em reposit\xf3rios p\xfablicos."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsxs)(s.strong,{children:["Sa\xeddas (",(0,n.jsx)(s.code,{children:"output"}),") tamb\xe9m podem conter dados sens\xedveis"]}),". O ideal \xe9 marc\xe1-las como ",(0,n.jsx)(s.code,{children:"sensitive = true"})," para evitar que apare\xe7am no terminal."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Workspaces compartilhados"}),", como os usados em automa\xe7\xf5es com pipelines, precisam de criptografia e controle de acesso rigoroso para o arquivo de estado."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"riscos-e-perigos",children:"Riscos e perigos"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Vazamento de credenciais em reposit\xf3rios"}),": Se voc\xea definir senhas ou tokens diretamente no ",(0,n.jsx)(s.code,{children:".tf"})," ou em arquivos ",(0,n.jsx)(s.code,{children:".tfvars"}),", h\xe1 risco de subir isso para o Git sem querer."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Logs com informa\xe7\xf5es sens\xedveis"}),": Durante ",(0,n.jsx)(s.code,{children:"terraform plan"})," ou ",(0,n.jsx)(s.code,{children:"terraform apply"}),", se outputs ou mensagens de erro exibirem valores sens\xedveis, eles poder\xe3o ser gravados em logs automatizados."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Estado armazenado sem criptografia"}),": Armazenar ",(0,n.jsx)(s.code,{children:"terraform.tfstate"})," em buckets ou blobs sem prote\xe7\xe3o \xe9 abrir uma porta para ataques."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Ambientes mal configurados"}),": Falta de segrega\xe7\xe3o entre ambientes (dev, test, prod) pode fazer com que segredos vazem de um para outro."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"cen\xe1rios-comuns-de-uso",children:"Cen\xe1rios comuns de uso"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"VMs com senha de administrador"}),": A senha precisa estar em um cofre, como o Azure Key Vault, e o Terraform acessa isso via ",(0,n.jsx)(s.code,{children:"data"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Deploy de banco de dados com usu\xe1rio e senha"}),": Nunca defina ",(0,n.jsx)(s.code,{children:'admin_password = "Senha123"'})," no c\xf3digo."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Aplica\xe7\xf5es que usam tokens ou certificados"}),": O ideal \xe9 configurar servi\xe7os como App Service ou AKS para referenciar valores do Key Vault."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Provisionamento com pipelines (GitHub Actions, Azure DevOps)"}),": Use secrets do pipeline para injetar valores no ",(0,n.jsx)(s.code,{children:"terraform.tfvars"}),", sem expor conte\xfado sens\xedvel."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"conclus\xe3o",children:"Conclus\xe3o"}),"\n",(0,n.jsx)(s.p,{children:"Dados sens\xedveis exigem aten\xe7\xe3o redobrada no Terraform. O simples fato de \u201ctudo estar funcionando\u201d n\xe3o significa que est\xe1 seguro. Seguran\xe7a precisa ser tratada como parte do design da infraestrutura, n\xe3o como um ajuste posterior. Em m\xf3dulos futuros, vamos explorar como proteger secrets com Key Vault e como configurar ambientes de automa\xe7\xe3o com seguran\xe7a refor\xe7ada."})]})}function u(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,s,o)=>{o.d(s,{R:()=>i,x:()=>d});var r=o(6540);const n={},a=r.createContext(n);function i(e){const s=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(a.Provider,{value:s},e.children)}}}]);