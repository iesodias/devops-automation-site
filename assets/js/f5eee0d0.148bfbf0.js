"use strict";(self.webpackChunkdevops_automation_site=self.webpackChunkdevops_automation_site||[]).push([[2121],{5882:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"20-intro-kevault","title":"Lab 20 - Introdu\xe7\xe3o ao Azure Key Vault","description":"Introdu\xe7\xe3o","source":"@site/curso-terraform-udemy/38-vault-microsoft.md","sourceDirName":".","slug":"/20-intro-kevault","permalink":"/udemy/terraform-automacao/20-intro-kevault","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":38,"frontMatter":{"id":"20-intro-kevault","title":"Lab 20 - Introdu\xe7\xe3o ao Azure Key Vault","noindex":true},"sidebar":"tutorialSidebar","previous":{"title":"Lab 19 - Trabalhando com Dados Sens\xedveis no Terraform","permalink":"/udemy/terraform-automacao/19-dados-sensiveis"},"next":{"title":"Lab 21 - Criando uma M\xe1quina Virtual no Azure com senha armazenada no Key Vault usando Terraform","permalink":"/udemy/terraform-automacao/21-criar-vm-kevault"}}');var n=s(4848),a=s(8453);const i={id:"20-intro-kevault",title:"Lab 20 - Introdu\xe7\xe3o ao Azure Key Vault",noindex:!0},t="Introdu\xe7\xe3o ao Azure Key Vault",d={},c=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"O que \xe9",id:"o-que-\xe9",level:2},{value:"Explica\xe7\xe3o t\xe9cnica",id:"explica\xe7\xe3o-t\xe9cnica",level:2},{value:"Comandos usando Azure CLI",id:"comandos-usando-azure-cli",level:2},{value:"Criar um Resource Group",id:"criar-um-resource-group",level:3},{value:"Criar o Key Vault",id:"criar-o-key-vault",level:3},{value:"Inserir um segredo",id:"inserir-um-segredo",level:3},{value:"Listar segredos",id:"listar-segredos",level:3},{value:"Obter o valor de um segredo",id:"obter-o-valor-de-um-segredo",level:3},{value:"Cen\xe1rios comuns de uso",id:"cen\xe1rios-comuns-de-uso",level:2}];function l(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"introdu\xe7\xe3o-ao-azure-key-vault",children:"Introdu\xe7\xe3o ao Azure Key Vault"})}),"\n",(0,n.jsx)(r.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,n.jsxs)(r.p,{children:["Em ambientes de nuvem, proteger informa\xe7\xf5es sens\xedveis como senhas, chaves de API, certificados e strings de conex\xe3o \xe9 uma prioridade. O ",(0,n.jsx)(r.strong,{children:"Azure Key Vault"})," \xe9 um servi\xe7o criado especificamente para atender essa necessidade. Nesta p\xe1gina, vamos entender o que \xe9 o Key Vault, cen\xe1rios comuns de uso, como ele funciona tecnicamente e como manipul\xe1-lo via Azure CLI."]}),"\n",(0,n.jsx)(r.h2,{id:"o-que-\xe9",children:"O que \xe9"}),"\n",(0,n.jsxs)(r.p,{children:["O ",(0,n.jsx)(r.strong,{children:"Azure Key Vault"})," \xe9 um servi\xe7o de gerenciamento de segredos, chaves e certificados na nuvem da Microsoft. Ele permite armazenar informa\xe7\xf5es sens\xedveis de forma segura, com controle de acesso, auditoria e integra\xe7\xe3o nativa com outros servi\xe7os do Azure."]}),"\n",(0,n.jsx)(r.p,{children:"Com ele, voc\xea pode:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Armazenar ",(0,n.jsx)(r.strong,{children:"segredos"})," como senhas, tokens e connection strings"]}),"\n",(0,n.jsxs)(r.li,{children:["Gerenciar ",(0,n.jsx)(r.strong,{children:"chaves criptogr\xe1ficas"})," usadas por aplica\xe7\xf5es e servi\xe7os"]}),"\n",(0,n.jsxs)(r.li,{children:["Controlar ",(0,n.jsx)(r.strong,{children:"certificados"})," p\xfablicos e privados"]}),"\n",(0,n.jsx)(r.li,{children:"Integrar com servi\xe7os como Azure Functions, App Service, AKS, Terraform, entre outros"}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"explica\xe7\xe3o-t\xe9cnica",children:"Explica\xe7\xe3o t\xe9cnica"}),"\n",(0,n.jsx)(r.p,{children:"O Key Vault funciona como um cofre isolado por regi\xe3o e escopo. Ele possui os seguintes componentes:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Vault:"})," A inst\xe2ncia do Key Vault em si"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Secrets:"})," Pares chave-valor para armazenar informa\xe7\xf5es sens\xedveis"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Keys:"})," Chaves criptogr\xe1ficas gerenciadas pelo Azure ou importadas"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Certificates:"})," Certificados SSL/TLS gerenciados com ciclo de vida automatizado"]}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"O controle de acesso pode ser feito de duas formas:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Pol\xedtica de acesso (Access Policy):"})," ACL tradicional dentro do Vault"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Azure RBAC:"})," Modelo baseado em fun\xe7\xf5es do Azure, mais integrado e moderno"]}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"Al\xe9m disso, o Key Vault pode ser acessado por servi\xe7os com identidades gerenciadas (Managed Identity), evitando o uso de credenciais fixas."}),"\n",(0,n.jsx)(r.h2,{id:"comandos-usando-azure-cli",children:"Comandos usando Azure CLI"}),"\n",(0,n.jsx)(r.h3,{id:"criar-um-resource-group",children:"Criar um Resource Group"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"az group create --name rg-keyvault-lab --location eastus\n"})}),"\n",(0,n.jsx)(r.h3,{id:"criar-o-key-vault",children:"Criar o Key Vault"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"az keyvault create \\\n  --name kv-meulab \\\n  --resource-group rg-keyvault-lab \\\n  --location eastus\n"})}),"\n",(0,n.jsx)(r.h3,{id:"inserir-um-segredo",children:"Inserir um segredo"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:'az keyvault secret set \\\n  --vault-name kv-meulab \\\n  --name "MeuSegredo" \\\n  --value "ValorSuperSecreto"\n'})}),"\n",(0,n.jsx)(r.h3,{id:"listar-segredos",children:"Listar segredos"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"az keyvault secret list --vault-name kv-meulab\n"})}),"\n",(0,n.jsx)(r.h3,{id:"obter-o-valor-de-um-segredo",children:"Obter o valor de um segredo"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:'az keyvault secret show \\\n  --vault-name kv-meulab \\\n  --name "MeuSegredo" \\\n  --query value -o tsv\n'})}),"\n",(0,n.jsx)(r.h2,{id:"cen\xe1rios-comuns-de-uso",children:"Cen\xe1rios comuns de uso"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Aplica\xe7\xf5es Web:"})," Armazenar strings de conex\xe3o e tokens de API"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Terraform e DevOps:"})," Manter segredos fora do c\xf3digo e consumir dinamicamente"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Ciclo de vida de certificados:"})," Automatizar a renova\xe7\xe3o e distribui\xe7\xe3o"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Servi\xe7os com Managed Identity:"})," App Services e Azure Functions acessam segredos sem expor credenciais"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Ambientes multiusu\xe1rio:"})," RBAC permite controle detalhado sobre quem pode ver ou modificar os segredos"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.p,{children:"O Key Vault \xe9 uma ferramenta essencial em qualquer estrat\xe9gia de seguran\xe7a em nuvem. Seu uso reduz riscos, aumenta a rastreabilidade e prepara sua aplica\xe7\xe3o para pr\xe1ticas profissionais de DevSecOps. Nos pr\xf3ximos m\xf3dulos, veremos como integr\xe1-lo com Terraform e pipelines de CI/CD."})]})}function u(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>i,x:()=>t});var o=s(6540);const n={},a=o.createContext(n);function i(e){const r=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),o.createElement(a.Provider,{value:r},e.children)}}}]);