"use strict";(self.webpackChunkdevops_automation_site=self.webpackChunkdevops_automation_site||[]).push([[778],{843:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>c,contentTitle:()=>t,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"variaveis-outputs","title":"Aula 3 - Deixando o C\xf3digo Inteligente com Vari\xe1veis e Outputs","description":"---","source":"@site/curso-terraform-udemy/04-variaveis-outputs.md","sourceDirName":".","slug":"/variaveis-outputs","permalink":"/udemy/terraform-automacao/variaveis-outputs","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"variaveis-outputs","title":"Aula 3 - Deixando o C\xf3digo Inteligente com Vari\xe1veis e Outputs","noindex":true},"sidebar":"tutorialSidebar","previous":{"title":"Aula 2 - O Ciclo de Vida Essencial do Terraform","permalink":"/udemy/terraform-automacao/ciclo-terraform"},"next":{"title":"Aula 4 - Tipos de Vari\xe1veis no Terraform","permalink":"/udemy/terraform-automacao/tipos-variaveis"}}');var n=s(4848),o=s(8453);const i={id:"variaveis-outputs",title:"Aula 3 - Deixando o C\xf3digo Inteligente com Vari\xe1veis e Outputs",noindex:!0},t="Aula 4: Deixando o C\xf3digo Inteligente com Vari\xe1veis e Outputs",c={},u=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"O que s\xe3o Vari\xe1veis e Outputs?",id:"o-que-s\xe3o-vari\xe1veis-e-outputs",level:2},{value:"Explica\xe7\xe3o T\xe9cnica",id:"explica\xe7\xe3o-t\xe9cnica",level:2},{value:"Vari\xe1veis",id:"vari\xe1veis",level:3},{value:"Outputs",id:"outputs",level:3},{value:"Comandos de Refer\xeancia",id:"comandos-de-refer\xeancia",level:2},{value:"Exemplo Pr\xe1tico",id:"exemplo-pr\xe1tico",level:2},{value:"Estrutura dos arquivos:",id:"estrutura-dos-arquivos",level:3},{value:"Output Esperado",id:"output-esperado",level:2},{value:"<code>terraform plan</code>",id:"terraform-plan",level:3},{value:"<code>terraform apply</code>",id:"terraform-apply",level:3},{value:"Melhores Pr\xe1ticas",id:"melhores-pr\xe1ticas",level:2}];function l(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"aula-4-deixando-o-c\xf3digo-inteligente-com-vari\xe1veis-e-outputs",children:"Aula 4: Deixando o C\xf3digo Inteligente com Vari\xe1veis e Outputs"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,n.jsxs)(r.p,{children:['At\xe9 agora, usamos valores fixos ("hardcoded") no nosso c\xf3digo Terraform. Mas o que acontece se quisermos reutilizar esse c\xf3digo em diferentes ambientes ou passar valores dinamicamente? \xc9 aqui que entram as ',(0,n.jsx)(r.strong,{children:"vari\xe1veis"})," e os ",(0,n.jsx)(r.strong,{children:"outputs"}),"."]}),"\n",(0,n.jsx)(r.p,{children:"Eles s\xe3o essenciais para tornar o c\xf3digo mais flex\xedvel, reutiliz\xe1vel e profissional."}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"o-que-s\xe3o-vari\xe1veis-e-outputs",children:"O que s\xe3o Vari\xe1veis e Outputs?"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsxs)(r.strong,{children:["Vari\xe1veis (",(0,n.jsx)(r.code,{children:"variable"}),")"]}),": s\xe3o os ",(0,n.jsx)(r.strong,{children:"par\xe2metros de entrada"})," do seu c\xf3digo. Permitem passar valores din\xe2micos para os recursos."]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsxs)(r.strong,{children:["Outputs (",(0,n.jsx)(r.code,{children:"output"}),")"]}),": s\xe3o os ",(0,n.jsx)(r.strong,{children:"valores de sa\xedda"}),". Exibem informa\xe7\xf5es importantes ap\xf3s a cria\xe7\xe3o da infraestrutura, como IPs, nomes ou ARNs."]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"explica\xe7\xe3o-t\xe9cnica",children:"Explica\xe7\xe3o T\xe9cnica"}),"\n",(0,n.jsx)(r.h3,{id:"vari\xe1veis",children:"Vari\xe1veis"}),"\n",(0,n.jsxs)(r.p,{children:["As vari\xe1veis s\xe3o declaradas usando o bloco ",(0,n.jsx)(r.code,{children:"variable"})," em um arquivo separado (por conven\xe7\xe3o, ",(0,n.jsx)(r.code,{children:"variables.tf"}),")."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-hcl",children:'# variables.tf\nvariable "nome_do_bucket" {\n  type        = string\n  description = "O nome que ser\xe1 usado no bucket S3."\n  default     = "meu-bucket-default-12345"\n}\n'})}),"\n",(0,n.jsx)(r.p,{children:"Para usar essa vari\xe1vel em um recurso:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-hcl",children:'# main.tf\nresource "aws_s3_bucket" "meu_bucket" {\n  bucket = var.nome_do_bucket\n}\n'})}),"\n",(0,n.jsx)(r.h3,{id:"outputs",children:"Outputs"}),"\n",(0,n.jsxs)(r.p,{children:["Os outputs s\xe3o declarados em um bloco ",(0,n.jsx)(r.code,{children:"output"})," (geralmente no arquivo ",(0,n.jsx)(r.code,{children:"outputs.tf"}),")."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-hcl",children:'# outputs.tf\noutput "arn_do_bucket" {\n  description = "O Amazon Resource Name (ARN) do bucket S3."\n  value       = aws_s3_bucket.meu_bucket.arn\n}\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"comandos-de-refer\xeancia",children:"Comandos de Refer\xeancia"}),"\n",(0,n.jsx)(r.p,{children:"Crie os arquivos com o c\xf3digo acima e execute:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"terraform init\nterraform plan\nterraform apply\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"exemplo-pr\xe1tico",children:"Exemplo Pr\xe1tico"}),"\n",(0,n.jsx)(r.h3,{id:"estrutura-dos-arquivos",children:"Estrutura dos arquivos:"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"variables.tf"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-hcl",children:'variable "nome_do_bucket" {\n  type        = string\n  description = "O nome que ser\xe1 usado no bucket S3."\n  default     = "meu-bucket-com-variavel"\n}\n'})}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"main.tf"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-hcl",children:'provider "aws" {\n  region = "us-east-1"\n}\n\nresource "aws_s3_bucket" "meu_bucket" {\n  bucket = var.nome_do_bucket\n  acl    = "private"\n}\n'})}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.strong,{children:"outputs.tf"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-hcl",children:'output "arn_do_bucket" {\n  description = "O Amazon Resource Name (ARN) do bucket S3."\n  value       = aws_s3_bucket.meu_bucket.arn\n}\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"output-esperado",children:"Output Esperado"}),"\n",(0,n.jsx)(r.h3,{id:"terraform-plan",children:(0,n.jsx)(r.code,{children:"terraform plan"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-text",children:'Terraform will perform the following actions:\n\n  # aws_s3_bucket.meu_bucket will be created\n  + resource "aws_s3_bucket" "meu_bucket" {\n      + acl    = "private"\n      + bucket = "meu-bucket-com-variavel"\n      ...\n    }\n\nPlan: 1 to add, 0 to change, 0 to destroy.\n'})}),"\n",(0,n.jsx)(r.h3,{id:"terraform-apply",children:(0,n.jsx)(r.code,{children:"terraform apply"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-text",children:'aws_s3_bucket.meu_bucket: Creating...\naws_s3_bucket.meu_bucket: Creation complete after 2s [id=meu-bucket-com-variavel]\n\nApply complete! Resources: 1 added, 0 changed, 0 destroyed.\n\nOutputs:\n\narn_do_bucket = "arn:aws:s3:::meu-bucket-com-variavel"\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"melhores-pr\xe1ticas",children:"Melhores Pr\xe1ticas"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Separe vari\xe1veis em arquivos ",(0,n.jsx)(r.code,{children:"variables.tf"})," para organizar melhor seu projeto"]}),"\n",(0,n.jsxs)(r.li,{children:["Use ",(0,n.jsx)(r.code,{children:"description"})," em todas as vari\xe1veis e outputs \u2014 isso ajuda na manuten\xe7\xe3o do c\xf3digo"]}),"\n",(0,n.jsxs)(r.li,{children:["Prefira n\xe3o colocar valores fixos no ",(0,n.jsx)(r.code,{children:"main.tf"}),", sempre que puder parametrizar"]}),"\n",(0,n.jsx)(r.li,{children:'Os outputs s\xe3o \xf3timos para usar como "interface" entre m\xf3dulos ou para scripts externos acessarem resultados'}),"\n",(0,n.jsxs)(r.li,{children:["Use arquivos ",(0,n.jsx)(r.code,{children:".tfvars"})," para definir valores customizados em ambientes diferentes"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{})]})}function d(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>i,x:()=>t});var a=s(6540);const n={},o=a.createContext(n);function i(e){const r=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),a.createElement(o.Provider,{value:r},e.children)}}}]);