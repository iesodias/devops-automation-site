"use strict";(self.webpackChunkdevops_automation_site=self.webpackChunkdevops_automation_site||[]).push([[3884],{4331:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>d,contentTitle:()=>i,default:()=>l,frontMatter:()=>t,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"lab-2-variables-output","title":"Lab - Vari\xe1veis e Outputs no Terraform","description":"Introdu\xe7\xe3o","source":"@site/curso-terraform-udemy/10-lab-variaveis-outputs.md","sourceDirName":".","slug":"/lab-2-variables-output","permalink":"/udemy/terraform-automacao/lab-2-variables-output","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"id":"lab-2-variables-output","title":"Lab - Vari\xe1veis e Outputs no Terraform","noindex":true},"sidebar":"tutorialSidebar","previous":{"title":"Lab 1 - Criando um Resource Group no Azure com Terraform","permalink":"/udemy/terraform-automacao/lab-1-rg"}}');var n=a(4848),s=a(8453);const t={id:"lab-2-variables-output",title:"Lab - Vari\xe1veis e Outputs no Terraform",noindex:!0},i="Lab: Vari\xe1veis e Outputs no Terraform",d={},u=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"Pr\xe9-requisitos",id:"pr\xe9-requisitos",level:2},{value:"Etapa 1: Criar recurso com valores fixos",id:"etapa-1-criar-recurso-com-valores-fixos",level:2},{value:"Estrutura de Arquivo",id:"estrutura-de-arquivo",level:3},{value:"Conte\xfado do <code>main.tf</code>",id:"conte\xfado-do-maintf",level:3},{value:"Comandos Terraform",id:"comandos-terraform",level:3},{value:"Resultado Esperado",id:"resultado-esperado",level:3},{value:"Etapa 2: Refatorar usando vari\xe1veis",id:"etapa-2-refatorar-usando-vari\xe1veis",level:2},{value:"Estrutura de Arquivo",id:"estrutura-de-arquivo-1",level:3},{value:"<code>variables.tf</code>",id:"variablestf",level:3},{value:"<code>main.tf</code>",id:"maintf",level:3},{value:"<code>outputs.tf</code>",id:"outputstf",level:3},{value:"Comandos Terraform",id:"comandos-terraform-1",level:3},{value:"Resultado Esperado",id:"resultado-esperado-1",level:3}];function c(e){const r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"lab-vari\xe1veis-e-outputs-no-terraform",children:"Lab: Vari\xe1veis e Outputs no Terraform"})}),"\n",(0,n.jsx)(r.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,n.jsxs)(r.p,{children:["Neste laborat\xf3rio, vamos aprender a utilizar ",(0,n.jsx)(r.strong,{children:"vari\xe1veis"})," e ",(0,n.jsx)(r.strong,{children:"outputs"})," no Terraform. Primeiro, faremos a cria\xe7\xe3o de um recurso Azure com valores fixos (hardcoded). Em seguida, refatoraremos o c\xf3digo usando vari\xe1veis para torn\xe1-lo mais flex\xedvel e reutiliz\xe1vel."]}),"\n",(0,n.jsx)(r.h2,{id:"pr\xe9-requisitos",children:"Pr\xe9-requisitos"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"Terraform instalado (vers\xe3o 1.12.2)"}),"\n",(0,n.jsx)(r.li,{children:"Conta na Azure com permiss\xf5es para criar recursos"}),"\n",(0,n.jsxs)(r.li,{children:["Azure CLI autenticada (",(0,n.jsx)(r.code,{children:"az login"}),")"]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"etapa-1-criar-recurso-com-valores-fixos",children:"Etapa 1: Criar recurso com valores fixos"}),"\n",(0,n.jsx)(r.h3,{id:"estrutura-de-arquivo",children:"Estrutura de Arquivo"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:"terraform-variaveis-lab/\n\u251c\u2500\u2500 main.tf\n"})}),"\n",(0,n.jsxs)(r.h3,{id:"conte\xfado-do-maintf",children:["Conte\xfado do ",(0,n.jsx)(r.code,{children:"main.tf"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-terraform",children:'terraform {\n  required_providers {\n    azurerm = {\n      source  = "hashicorp/azurerm"\n      version = "4.35.0"\n    }\n  }\n\n  required_version = ">= 1.12.2"\n}\n\nprovider "azurerm" {\n  features {}\n}\n\nresource "azurerm_resource_group" "rg" {\n  name     = "rg-teste"\n  location = "East US"\n}\n\nresource "azurerm_storage_account" "storage" {\n  name                     = "storagelab123456"\n  resource_group_name      = azurerm_resource_group.rg.name\n  location                 = azurerm_resource_group.rg.location\n  account_tier             = "Standard"\n  account_replication_type = "LRS"\n}\n\noutput "endpoint_da_storage" {\n  description = "URL da Azure Storage Account."\n  value       = azurerm_storage_account.storage.primary_blob_endpoint\n}\n'})}),"\n",(0,n.jsx)(r.h3,{id:"comandos-terraform",children:"Comandos Terraform"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"terraform init\nterraform plan\nterraform apply\n"})}),"\n",(0,n.jsx)(r.h3,{id:"resultado-esperado",children:"Resultado Esperado"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:'Apply complete! Resources: 2 added, 0 changed, 0 destroyed.\n\nOutputs:\nendpoint_da_storage = "https://storagelab123456.blob.core.windows.net/"\n'})}),"\n",(0,n.jsx)(r.h2,{id:"etapa-2-refatorar-usando-vari\xe1veis",children:"Etapa 2: Refatorar usando vari\xe1veis"}),"\n",(0,n.jsx)(r.h3,{id:"estrutura-de-arquivo-1",children:"Estrutura de Arquivo"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:"terraform-variaveis-lab/\n\u251c\u2500\u2500 main.tf\n\u251c\u2500\u2500 variables.tf\n\u251c\u2500\u2500 outputs.tf\n"})}),"\n",(0,n.jsx)(r.h3,{id:"variablestf",children:(0,n.jsx)(r.code,{children:"variables.tf"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-terraform",children:'variable "nome_da_storage" {\n  type        = string\n  description = "Nome da Azure Storage Account"\n  default     = "storagelab123456"\n}\n'})}),"\n",(0,n.jsx)(r.h3,{id:"maintf",children:(0,n.jsx)(r.code,{children:"main.tf"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-terraform",children:'terraform {\n  required_providers {\n    azurerm = {\n      source  = "hashicorp/azurerm"\n      version = "4.35.0"\n    }\n  }\n\n  required_version = ">= 1.12.2"\n}\n\nprovider "azurerm" {\n  features {}\n}\n\nresource "azurerm_resource_group" "rg" {\n  name     = "rg-teste"\n  location = "East US"\n}\n\nresource "azurerm_storage_account" "storage" {\n  name                     = var.nome_da_storage\n  resource_group_name      = azurerm_resource_group.rg.name\n  location                 = azurerm_resource_group.rg.location\n  account_tier             = "Standard"\n  account_replication_type = "LRS"\n}\n'})}),"\n",(0,n.jsx)(r.h3,{id:"outputstf",children:(0,n.jsx)(r.code,{children:"outputs.tf"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-terraform",children:'output "endpoint_da_storage" {\n  description = "URL da Azure Storage Account."\n  value       = azurerm_storage_account.storage.primary_blob_endpoint\n}\n'})}),"\n",(0,n.jsx)(r.h3,{id:"comandos-terraform-1",children:"Comandos Terraform"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"terraform init\nterraform plan\nterraform apply\n"})}),"\n",(0,n.jsx)(r.h3,{id:"resultado-esperado-1",children:"Resultado Esperado"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:'Apply complete! Resources: 2 added, 0 changed, 0 destroyed.\n\nOutputs:\nendpoint_da_storage = "https://storagelab123456.blob.core.windows.net/"\n'})}),"\n",(0,n.jsxs)(r.blockquote,{children:["\n",(0,n.jsxs)(r.p,{children:["\u2705 ",(0,n.jsx)(r.strong,{children:"Boas pr\xe1ticas:"})]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Separe ",(0,n.jsx)(r.code,{children:"main.tf"}),", ",(0,n.jsx)(r.code,{children:"variables.tf"})," e ",(0,n.jsx)(r.code,{children:"outputs.tf"})," para melhor organiza\xe7\xe3o."]}),"\n",(0,n.jsxs)(r.li,{children:["Use ",(0,n.jsx)(r.code,{children:"terraform.tfvars"})," para valores espec\xedficos por ambiente."]}),"\n",(0,n.jsxs)(r.li,{children:["Prefira vari\xe1veis com ",(0,n.jsx)(r.code,{children:"description"})," e ",(0,n.jsx)(r.code,{children:"type"})," para valida\xe7\xe3o e documenta\xe7\xe3o."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"Parab\xe9ns! Agora voc\xea domina o uso de vari\xe1veis e outputs no Terraform para construir c\xf3digos mais inteligentes e reutiliz\xe1veis!"})]})}function l(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,r,a)=>{a.d(r,{R:()=>t,x:()=>i});var o=a(6540);const n={},s=o.createContext(n);function t(e){const r=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),o.createElement(s.Provider,{value:r},e.children)}}}]);